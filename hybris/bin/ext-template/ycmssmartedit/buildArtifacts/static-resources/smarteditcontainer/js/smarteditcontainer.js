angular.module("authenticationModule",["functionsModule","resourceLocationsModule","storageServiceModule","sharedDataServiceModule","alertServiceModule","modalServiceModule","ui.bootstrap"]).factory("DEFAULT_AUTH_MAP",["I18N_RESOURCE_URI","DEFAULT_AUTHENTICATION_ENTRY_POINT",function(a,b){var c="^(?!"+a+"/.*$).*",d={};return d[c]=b,d}]).factory("authenticationService",["$rootScope","$q","$injector","$log","LANDING_PAGE_PATH","MODAL_BUTTON_ACTIONS","DEFAULT_AUTHENTICATION_ENTRY_POINT","DEFAULT_AUTH_MAP","sharedDataService","storageService","alertService","getQueryString","convertToArray","hitch","copy","merge","isBlank",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r={},s=function(a){return c.get("languageService").isInitialized().then(function(e){return j.isInitialized().then(function(e){return c.get("modalService").open({cssClasses:e?"ySELoginInit":"ySELoginNotInit",templateUrl:"web/common/core/services/loginDialog.html",controller:["modalManager",function(f){f.setShowHeaderDismiss(!1),this.initialized=e,this.auth={username:"",password:""},this.authURI=a.authURI,this.authURIKey=btoa(this.authURI).replace(/=/g,""),this.submit=function(e){var g=b.defer();if(e.failed=!1,e.posted=!0,e.$valid){var h=o(a.clientCredentials||{});h.username=this.auth.username,h.password=this.auth.password,h.grant_type="password",c.get("$http")({method:"POST",url:this.authURI,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:l(h).replace("?","")}).success(n(this,function(a,b,c,e){j.storeAuthToken(this.authURI,a),d.debug(["API Authentication Success: ",this.authURI," status: ",b].join(" ")),f.close(),g.resolve()})).error(n(this,function(a,b,c,f){j.removeAuthToken(this.authURI),d.debug(["API Authentication Failure: ",this.authURI," status: ",b].join(" ")),e.failed=!0,g.reject()}))}else g.reject();return g.promise}}]})})})},t=function(a){return i.get("authenticationMap").then(function(b){return b=p(b||{},h),m(b).filter(function(b){return new RegExp(b.key,"g").test(a)}).map(function(a){return a.value})})},u=function(a){return i.get("authenticationMap").then(function(b){var c=m(b).map(function(a){return a.value});return c.indexOf(a)>-1||a===g})},v=function(a){return t(a).then(function(a){return i.get("credentialsMap").then(function(b){b=b||{};var c=a[0];return{authURI:c,clientCredentials:b[c]}})})},w=function(a){return v(a).then(function(a){return s(a).then(function(b){r[a.authURI]=!1})})},x=function(){j.removeAllAuthTokens();var a=c.get("$location"),b=a.url();q(b)||b===e?c.get("$route").reload():a.url(e)};return{authenticate:w,logout:x,isReAuthInProgress:function(a){return r[a]===!0},setReAuthInProgress:function(a){r[a]=!0},filterEntryPoints:t,isAuthEntryPoint:u}}]),angular.module("httpAuthInterceptorModule",["functionsModule","translationServiceModule","authenticationModule","storageServiceModule"]).factory("httpAuthInterceptor",["$q","$location","$rootScope","$injector","hitch","storageService","authenticationService","$log",function(a,b,c,d,e,f,g,h){var i={},j={request:function(b){if(/.+\.html$/.test(b.url))return b;a.defer();return g.filterEntryPoints(b.url).then(function(a){if(a&&a.length>0){var c=a[0];return f.getAuthToken(c).then(function(a){return a?(h.debug(["Intercepting request adding access token: ",b.url].join(" ")),b.headers.Authorization=a.token_type+" "+a.access_token):h.debug(["Intercepting request no access token found: ",b.url].join(" ")),b})}return b})},responseError:function(b){if(b&&b.config&&b.config.url){h.debug(["Intercepting response error: ",b.config.url," status: ",b.status].join(" "));var c=a.defer();return g.isAuthEntryPoint(b.config.url).then(function(a){401!=b.status||a?c.reject(b):g.filterEntryPoints(b.config.url).then(function(a){var d=a[0];h.debug(["Intercepting and trying Authentication: ",b.config.url,d].join(" ")),i[d]=i[d]||[],i[d].push(c),g.isReAuthInProgress(d)||(g.setReAuthInProgress(d),g.authenticate(b.config.url).then(e(d,function(){angular.forEach(i[this],function(a){a.resolve()}),i[this]=[]}),e(d,function(a){angular.forEach(i[this],function(a){a.reject()}),i[this]=[]})))})}),c.promise.then(function(){return d.get("$http")(b.config)})}}};return j}]).config(["$httpProvider",function(a){a.interceptors.push("httpAuthInterceptor")}]),angular.module("httpErrorInterceptorModule",["functionsModule","translationServiceModule","authenticationModule","alertServiceModule","resourceLocationsModule"]).factory("httpErrorInterceptor",["LANGUAGE_RESOURCE_URI","$q","$location","$rootScope","$injector","hitch","authenticationService","$log","alertService",function(a,b,c,d,e,f,g,h,i){var j={};return j.removeErrorsByType=function(a,b){return b.filter(function(b){return b.type!=a})},j.convertErrorToTimedAlertObject=function(a){var b={successful:!1,message:a.message,closeable:!0};return b},j.responseError=function(c){if(c&&c.config&&c.config.url){h.debug(["Intercepting response error: ",c.config.url," status: ",c.status].join(" "));var d=new RegExp(a.replace(/\:.*\//g,".*/"));if(400==c.status){var e=j.removeErrorsByType("ValidationError",c.data.errors);if(0!==e.length){var f=[];for(var g in e)f.push(j.convertErrorToTimedAlertObject(e[g]));i.pushAlerts(f)}}else if(401!=c.status&&!d.test(c.config.url)){var k=void 0===c.message?"unknown.request.error":c.message;i.pushAlerts([{successful:!1,message:k,closeable:!0}])}}return b.reject(c)},j}]).config(["$httpProvider",function(a){a.interceptors.push("httpErrorInterceptor")}]),angular.module("httpSecurityHeadersInterceptorModule",["functionsModule"]).factory("httpSecurityHeadersInterceptor",["$q","parseQuery","hitch",function(a,b,c){var d=function(a){return a.headers=a.headers||[],a.headers["X-FRAME-Options"]="DENY",a.headers["X-XSS-Protection"]="1; mode=block",a.headers["X-Content-Type-Options"]="nosniff",a.headers["Strict-Transport-Security"]="max-age=16070400; includeSubDomains",a};return{request:d}}]).config(["$httpProvider",function(a){a.interceptors.push("httpSecurityHeadersInterceptor")}]),function(){function a(){function a(){}return a.prototype.renderComponent=function(a,b,c){},a.prototype.renderRemovalBySlotAndComponent=function(a,b){},a.prototype.renderRemoval=function(a,b){},a}angular.module("renderServiceInterfaceModule",[]).factory("RenderServiceInterface",a)}(),angular.module("sharedDataServiceInterfaceModule",[]).factory("SharedDataServiceInterface",function(){function a(){}return a.prototype.get=function(a){},a.prototype.set=function(a,b){},a}),angular.module("toolbarInterfaceModule",["functionsModule"]).factory("ToolbarServiceInterface",["$q","$log","hitch",function(a,b,c){function d(){}return d.prototype._getUniqueIdentifier=function(){return(new Date).getTime()+Math.random().toString()},d.prototype.getItems=function(){return this.actions},d.prototype.getAliases=function(){return this.aliases},d.prototype.addItems=function(a){var b=a.map(function(a){var b=this._getUniqueIdentifier();return this.actions[b]=a.callback,{key:b,name:a.i18nKey,icons:a.icons,type:a.type,include:a.include,className:a.className}},this);this.addAliases(b)},d.prototype.addAliases=function(){},d.prototype.addItemsStyling=function(){},d.prototype.triggerActionOnInner=function(){},d}]),angular.module("urlServiceInterfaceModule",[]).factory("UrlServiceInterface",function(){function a(){}return a.prototype.openUrlInPopup=function(a){},a}),angular.module("alertsBoxModule",[]).directive("alertsBox",function(){return{templateUrl:"web/common/services/alerts/alertsTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{alerts:"="},link:function(a,b,c){a.dismissAlert=function(b){a.alerts.splice(b,1)}}}}),angular.module("authorizationModule",["restServiceFactoryModule","loadConfigModule","ngAnimate"]).constant("operationPermissionsMap",{CREATE:"CREATE",READ:"READ",UPDATE:"CHANGE",REMOVE:"REMOVE"}).factory("permissionsAdapter",function(){var a=function(){this.process=function(a){return a}};return new a}).factory("authorizationService",["$log","restServiceFactory","loadConfigManagerService","permissionsAdapter","operationPermissionsMap","$q","hitch",function(a,b,c,d,e,f,g){var h=function(){this._load=function(){return c.loadAsObject().then(g(this,function(a){return this.restService=b.get(a.permissionsAPI),this.restService.get().then(g(this,function(a){return this.typePermissions=d.process(a.typePermissions),this.typePermissions}))}),function(){a.error("load configuration failure")})},this._hasPermission=function(a,b){var c=this.typePermissions.filter(function(b){return b.type===a});return 1===c.length?c[0].operationPermissions.indexOf(b)>-1:!1},this._can=function(b,c){var d=f.defer();return this.typePermissions?d.resolve(this._hasPermission(b,c)):this._load().then(g(this,function(){d.resolve(this._hasPermission(b,c))},function(){a.error("_can failure")})),d.promise},this.canCreate=function(a){return this._can(a,e.CREATE)},this.canRead=function(a){return this._can(a,e.READ)},this.canUpdate=function(a){return this._can(a,e.UPDATE)},this.canDelete=function(a){return this._can(a,e.REMOVE)}};return new h}]).factory("permissionDirectiveFactory",["$animate","$log","authorizationService","operationPermissionsMap",function(a,b,c,d){return function(e){var f="has"+e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase()+"Permission",g={};return g[f]="=",{transclude:"element",restrict:"A",scope:g,link:function(g,h,i,j,k){var l,m;g.$watch(f,function(g){c._can(g,d[e]).then(function(b){b?l||k(function(b,c){l=c,b[b.length++]=document.createComment(" end "+f+": "+i[f]+" "),a.enter(b,h.parent(),h)}):(m&&(m.remove(),m=null),l&&(l.$destroy(),l=null))},function(){b.error("failed to retrieve authorization")})})}}}}]).directive("hasCreatePermission",["permissionDirectiveFactory",function(a){return a("CREATE")}]).directive("hasReadPermission",["permissionDirectiveFactory",function(a){return a("READ")}]).directive("hasUpdatePermission",["permissionDirectiveFactory",function(a){return a("UPDATE")}]).directive("hasDeletePermission",["permissionDirectiveFactory",function(a){return a("DELETE")}]),angular.module("dragAndDropServiceInterfaceModule",[]).factory("DragAndDropServiceInterface",function(){function a(){}return a.prototype.register=function(a){},a}),angular.module("eventServiceModule",["functionsModule"]).constant("EVENT_SERVICE_MODE_ASYNCH","EVENT_SERVICE_MODE_ASYNCH").constant("EVENT_SERVICE_MODE_SYNCH","EVENT_SERVICE_MODE_SYNCH").factory("EventService",["customTimeout","$q","$log","hitch","EVENT_SERVICE_MODE_ASYNCH","EVENT_SERVICE_MODE_SYNCH",function(a,b,c,d,e,f){var g=function(g){this.eventHandlers={},this.mode=e,(g===e||g===f)&&(this.mode=g),this._recursiveCallToEventHandlers=function(a,b,c){return void 0===c&&(c=0),this.eventHandlers[a][c](a,b).then(d(this,function(d){return c<this.eventHandlers[a].length-1?this._recursiveCallToEventHandlers(a,b,c+1):d}))},this.sendEvent=function(a,b){if(this.mode===e)this.sendAsynchEvent(a,b);else{if(this.mode!==f)throw"Unknown event service mode: "+this.mode;this.sendSynchEvent(a,b)}},this.sendSynchEvent=function(a,d){var e=b.defer();return a?(this.eventHandlers[a]&&this.eventHandlers[a].length>0?this._recursiveCallToEventHandlers(a,d).then(function(a){e.resolve(a)},function(){e.reject()}):e.resolve(),e.promise):(c.error("Failed to send event. No event ID provided for data: "+d),void e.reject())},this.sendAsynchEvent=function(c,e){var f=b.defer();return a(d(this,function(){this.sendSynchEvent(c,e).then(function(a){f.resolve(a)},function(){f.reject()})}),0),f.promise},this.registerEventHandler=function(a,b){return a&&b?(void 0===this.eventHandlers[a]&&(this.eventHandlers[a]=[]),void this.eventHandlers[a].push(b)):void c.error("Failed to register event handler for event: "+a)},this.unRegisterEventHandler=function(a,b){var d=this.eventHandlers[a].indexOf(b);d>=0?this.eventHandlers[a].splice(d,1):c.warn("Attempting to remove event handler for "+a+" but handler not found.")}};return g}]).factory("systemEventService",["EventService",function(a){var b=new a;return b}]),angular.module("experienceInterceptorModule",["functionsModule","sharedDataServiceModule","restServiceFactoryModule","resourceLocationsModule"]).constant("CONTEXT_CATALOG","CURRENT_CONTEXT_CATALOG").constant("CONTEXT_CATALOG_VERSION","CURRENT_CONTEXT_CATALOG_VERSION").constant("CONTEXT_SITE_ID","CURRENT_CONTEXT_SITE_ID").factory("experienceInterceptor",["hitch","sharedDataService","$q","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","CMSWEBSERVICES_PATH","MEDIA_PATH","CONTEXT_SITE_ID",function(a,b,c,d,e,f,g,h){var i=function(a){var i=c.defer();return a&&a.url&&a.url.indexOf(g)>-1?b.get("experience").then(function(b){b&&(a.params.params.indexOf(d)>-1&&(a.params.params=a.params.params.replace(d,b.catalogDescriptor.catalogId)),a.params.params.indexOf(e)>-1&&(a.params.params=a.params.params.replace(e,b.catalogDescriptor.catalogVersion))),i.resolve(a)}):a&&a.url&&a.url.indexOf(f)>-1?b.get("experience").then(function(b){b&&(a.url.indexOf(d)>-1&&(a.url=a.url.replace(d,b.catalogDescriptor.catalogId)),a.url.indexOf(e)>-1&&(a.url=a.url.replace(e,b.catalogDescriptor.catalogVersion)),a.url.indexOf(h)>-1&&(a.url=a.url.replace(h,b.siteDescriptor.uid))),i.resolve(a)}):i.resolve(a),i.promise},j={};return j.request=a(j,i),j}]).config(["$httpProvider",function(a){a.interceptors.push("experienceInterceptor")}]),angular.module("functionsModule",[]).factory("ParseError",function(){var a=function(a){this.value=a};return a}).factory("getOrigin",function(){return function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}).factory("isBlank",function(){return function(a){return"undefined"==typeof a||null===a||"null"===a||0===a.toString().trim().length}}).factory("extend",function(){return function(a,b){return b||(b=function(){}),b.prototype=Object.create(a.prototype),b}}).factory("hitch",function(){return function(a,b){var c=Array.prototype.slice.call(arguments),d=c.slice(2);return function(){var c=Array.prototype.slice.call(arguments);return b.apply(a,d.concat(c))}}}).factory("customTimeout",["$rootScope",function(a){return function(b,c){setTimeout(function(){b(),a.$digest()},c)}}]).factory("copy",function(){return function(a){return JSON.parse(JSON.stringify(a))}}).factory("merge",function(){return function(a,b){return jQuery.extend(a,b),a}}).factory("getQueryString",function(){return function(a){var b="";if(a)for(var c in a)b+="&"+c+"="+a[c];return"?"+b}}).factory("getURI",function(){return function(a){return a&&a.indexOf("?")>-1?a.split("?")[0]:a}}).factory("parseQuery",function(){return function(a){var b={};return a.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b}}).factory("trim",function(){return function(a){var b=/^\s+/,c=/\s+$/;return a.replace(b,"").replace(c,"")}}).factory("convertToArray",function(){return function(a){var b=[];for(var c in a)0!==c.indexOf("$")&&0!==c.indexOf("toJSON")&&b.push({key:c,value:a[c]});return b}}).factory("injectJS",["customTimeout","$log","hitch",function(a,b,c){function d(){return $script}return{getInjector:d,execute:function(a){var b=a.srcs,d=a.index,e=a.callback;void 0===d&&(d=0),void 0!==b[d]&&this.getInjector()(b[d],c(this,function(){d+1<b.length?this.execute({srcs:b,index:d+1,callback:e}):"function"==typeof e&&e()}))}}}]).factory("uniqueArray",function(){return function(a,b){return b.forEach(function(b){-1==a.indexOf(b)&&a.push(b)}),a}}).factory("regExpFactory",function(){return function(a){var b=new RegExp(/^[a-zA-Z\d]+$/i),c=new RegExp(/^[a-zA-Z\d\*]+$/i);return b.test(a)?regexpKey=["^","$"].join(a):c.test(a)?regexpKey=["^","$"].join(a.replace(/\*/,".*")):regexpKey=a,new RegExp(regexpKey,"g")}}).factory("generateIdentifier",function(){return function(){return(new Date).getTime()+Math.random().toString()}}).factory("escapeHtml",function(){return function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):a}}),angular.module("gatewayFactoryModule",["eventServiceModule"]).constant("WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY","whiteListedStorefronts").service("gatewayFactory",["$rootScope","$q","hitch","getOrigin","systemEventService","customTimeout","$log","$window","$injector","WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY",function(a,b,c,d,e,f,g,h,i,j){function k(){var a=h.addEventListener?"addEventListener":"attachEvent",b="attachEvent"==a?"onmessage":"message",d=[];h[a](b,c(this,function(a){if(this._isAllowed(a.origin)){var b=a.data;if(d.indexOf(b.pk)>-1)return;d.push(b.pk),g.debug("message event handler called",b.eventId);var c=b.gatewayId,e=s[c];if(!e)return void g.debug("Incoming message on gateway "+c+", but no destination exists.");e._processEvent(b)}else g.error("disallowed storefront is trying to communicate with smarteditcontainer")}),!1)}function l(a){return s[a]?(g.error("Message Gateway for "+a+" already reserved"),null):(s[a]=new t(a),s[a])}var m="promiseAcknowledgement",n="promiseReturn",o="success",p="failure",q=100,r=[],s={},t=function(a){this.gatewayId=a,this._getTargetFrame=function(){return h.frameElement?h.parent:h.document.getElementsByTagName("iframe")[0].contentWindow},this._generateIdentifier=function(){return(new Date).getTime()+Math.random().toString()},this._getSystemEventId=function(a){return this.gatewayId+":"+a},this.publish=function(a,d,e,h){e||(e=0);var i=b.defer(),j=this._getTargetFrame();return h=h||this._generateIdentifier(),j.postMessage({pk:h,gatewayId:this.gatewayId,eventId:a,data:d},"*"),r[h]=i,f(c(this,function(b,e){b.acknowledged||a===n||a===m||(5>e?(e++,g.debug(document.location.href,"retrying",a),this.publish(a,d,e,h).then(c(b,function(a){this.resolve(a)}),c(b,function(){this.reject()}))):b.reject())},i,e),q),i.promise},this.subscribe=function(a,b){var c=this._getSystemEventId(a);e.registerEventHandler(c,b)},this._processEvent=function(a){if(a.eventId!==n&&a.eventId!==m){g.debug(document.location.href,"sending acknowledgement for",a),this.publish(m,{pk:a.pk});var b=this._getSystemEventId(a.eventId);e.sendAsynchEvent(b,a.data).then(c(this,function(b){g.debug(document.location.href,"sending promise resolve",a),this.publish(n,{pk:a.pk,type:o,resolvedDataOfLastSubscriber:b})}),c(this,function(){g.debug(document.location.href,"sending promise reject",a),this.publish(n,{pk:a.pk,type:p})}))}else a.eventId===n?r[a.data.pk]&&(a.data.type===o?(g.debug(document.location.href,"received promise resolve",a),r[a.data.pk].resolve(a.data.resolvedDataOfLastSubscriber)):a.data.type===p&&(g.debug(document.location.href,"received promise reject",a),r[a.data.pk].reject())):a.eventId===m&&r[a.data.pk]&&(g.debug(document.location.href,"received acknowledgement",a),r[a.data.pk].acknowledged=!0)}};return{initListener:k,createGateway:l,_isIframe:function(a){return h.frameElement},_isAllowed:function(a){var b=i.has(j)?i.get(j):[];return this._isIframe()||d()===a||b.some(function(b){return a.indexOf(b)>-1})}}}]),angular.module("gatewayProxyModule",["gatewayFactoryModule"]).factory("gatewayProxy",["$log","$q","hitch","gatewayFactory",function(a,b,c,d){var e=function(a){return""===a.toString().match(/\{([\s\S]*)\}/m)[1].trim()},f=function(a,b,c){delete b[a],b[a]=function(){return c.publish(a,{arguments:Array.prototype.slice.call(arguments)}).then(function(a){return a})}},g=function(a,d){var e=d[a];d[a]=c(e,function(){return b.when(this.apply(d,arguments))})},h=function(a,b,c,d){return b[a].apply(b,d.arguments)},i=function(b,i){if(!b.gatewayId)return a.error("initForService() - service expected to have an associated gatewayId"),null;var j=d.createGateway(b.gatewayId),k=i;if(!k){k=[];for(var l in b)"function"==typeof b[l]&&k.push(l)}k.forEach(function(a){"function"==typeof b[a]&&(e(b[a])?f(a,b,j):(g(a,b),j.subscribe(a,c(null,h,a,b))))})};return{initForService:i}}]),angular.module("FetchDataHandlerInterfaceModule",[]).factory("FetchDataHandlerInterface",function(){var a=function(){};return a.prototype.getById=function(a,b){throw"getById is not implemented"},a.prototype.findBymask=function(a,b){throw"findBymask is not implemented"},a}),angular.module("fetchEnumDataHandlerModule",["FetchDataHandlerInterfaceModule","restServiceFactoryModule","resourceLocationsModule"]).factory("fetchEnumDataHandler",["$q","FetchDataHandlerInterface","restServiceFactory","isBlank","extend","ENUM_RESOURCE_URI",function(a,b,c,d,e,f){var g={},h=function(){this.restServiceForEnum=c.get(f)};return h=e(b,h),h.prototype.findByMask=function(b,c){return(g[b.cmsStructureEnumType]?a.when(g[b.cmsStructureEnumType]):this.restServiceForEnum.get({enumClass:b.cmsStructureEnumType})).then(function(a){return g[b.cmsStructureEnumType]=a,g[b.cmsStructureEnumType].enums.filter(function(a){return d(c)||a.label.toUpperCase().indexOf(c.toUpperCase())>-1})})},new h}]),angular.module("fetchMediaDataHandlerModule",["FetchDataHandlerInterfaceModule","experienceInterceptorModule","restServiceFactoryModule","resourceLocationsModule"]).factory("fetchMediaDataHandler",["FetchDataHandlerInterface","restServiceFactory","hitch","copy","extend","$q","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","CATALOGS_PATH","MEDIA_PATH",function(a,b,c,d,e,f,g,h,i,j){var k=function(){this.restServiceForMediaSearch=b.get(j),this.restServiceForMediaFetch=b.get(i+g+"/versions/"+h+"/media")};return k=e(a,k),k.prototype.findByMask=function(a,b){var c=f.defer(),d={};return d.namedQuery="namedQueryMediaSearchByCodeCatalogVersion",d.params="code:"+b+",catalogId:"+g+",catalogVersion:"+h,this.restServiceForMediaSearch.get(d).then(function(a){c.resolve(a.media)},function(){c.reject()}),c.promise},k.prototype.getById=function(a,c){var d=f.defer();return this.restServiceForMediaFetch=b.get(i+g+"/versions/"+h+"/media/"+c),this.restServiceForMediaFetch.get().then(function(a){d.resolve(a)},function(){d.reject()}),d.promise},new k}]),angular.module("previewDataGenericEditorResponseHandlerModule",[]).factory("previewDataGenericEditorResponseHandler",function(){var a=function(a,b){a.pristine.ticketId=b.ticketId};return a}),angular.module("dateTimePickerModule",["languageServiceModule"]).directive("dateTimePicker",["$rootScope","languageService",function(a,b){return{templateUrl:"web/common/services/genericEditor/dateTimePicker/dateTimePickerTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{name:"=",model:"=",isEditable:"="},link:function(c,d){c.placeholderText="componentform.select.date",c.isEditable&&$(d.children()[0]).datetimepicker({format:"L LT",showClear:!0,showClose:!0,useCurrent:!1,minDate:0,keepOpen:!0,locale:b.getBrowserLocale().split("-")[0]}).on("dp.change",function(){c.model=d.find("input")[0].value,a.$digest()})}}}]),angular.module("genericEditorModule",["genericEditorFieldModule","restServiceFactoryModule","functionsModule","eventServiceModule","coretemplates","translationServiceModule","localizedElementModule","languageServiceModule","experienceInterceptorModule","dateTimePickerModule","fetchEnumDataHandlerModule"]).factory("GenericEditor",["restServiceFactory","languageService","sharedDataService","systemEventService","hitch","escapeHtml","copy","isBlank","$q","$log","$translate","$injector","RESPONSE_HANDLER_SUFFIX",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=["Boolean","ShortString","LongString","RichText","Date","Dropdown"],o="linkToggle",p="UnrelatedValidationErrors",q=function(a){if(h(a.structure)&&h(a.structureApi))throw"genericEditor.configuration.error.no.structure";if(!h(a.structure)&&!h(a.structureApi))throw"genericEditor.configuration.error.2.structures";if(h(a.contentApi))throw"genericEditor.configuration.error.no.contentapi"},r=function(b){q(b),this.id=b.id,this.smarteditComponentType=b.smarteditComponentType,this.smarteditComponentId=b.smarteditComponentId,this.updateCallback=b.updateCallback,this.structure=b.structure,b.structureApi&&(this.editorStructureService=a.get(b.structureApi)),this.editorCRUDService=a.get(b.contentApi),this.initialContent=b.content,this.editorLanguageService=a.get("cmsapi/languages"),this.component=null,this.fields=[],this.languages=[],this.linkToStatus=null,d.registerEventHandler(p,e(this,this._handleUnrelatedValidationErrors))};return r.prototype._handleUnrelatedValidationErrors=function(a,b){if(!this.isDirty()){var c=this._displayValidationErrors(b);c&&d.sendAsynchEvent("EDITOR_IN_ERROR_EVENT",this.id)}return i.when()},r.prototype._isPrimitive=function(a){return n.indexOf(a)>-1},r.prototype._getSelector=function(a){return $(a)},r.prototype.getRestServiceByType=function(a){return"Languages"===a?this.editorLanguageService:this.editorCRUDService},r.prototype.reset=function(a){return this._getSelector(".ui-select-search").val(""),this._getSelector(".ui-select-search").trigger("input"),this.removeValidationErrors(),this.component=g(this.pristine),this.fields.forEach(function(a){delete a.initiated}),this.holders||(this.holders=this.fields.map(e(this,function(a){return{editor:this,field:a}}))),a&&a.$setPristine(),i.when()},r.prototype.removeValidationErrors=function(){for(var a=0;a<this.fields.length;a++){var b=this.fields[a];b.errors=void 0}},r.prototype.fetch=function(){return this.initialContent?i.when(this.initialContent):this.smarteditComponentId?this.editorCRUDService.get({identifier:this.smarteditComponentId}):i.when({})},r.prototype.sanitizeLoad=function(a){return this.fields.forEach(function(b){b.localized===!0&&h(a[b.qualifier])&&(a[b.qualifier]={type:"map",value:{}})}),a},r.prototype.load=function(){var a=i.defer();return this.fetch().then(e(this,function(b){this.pristine=this.sanitizeLoad(b),this.reset(),a.resolve()}),function(b){j.error("GenericEditor.load failed"),a.reject()}),a.promise},r.prototype._merge=function(a,b){var c=a;return b=g(b),this.fields.forEach(function(a){a.editable===!0&&(c[a.qualifier]=b[a.qualifier])}),this.linkToStatus.hasBoth()&&(c.external=b.external,c.urlLink=b.urlLink),c},r.prototype.getComponent=function(a){return this.component},r.prototype.sanitizePayload=function(a,b){var c={SHORT_STRING:"ShortString",LONG_STRING:"LongString",LINK_TOGGLE:"LinkToggle"},d="linkToggle",e=[];return b.forEach(function(a){(a.cmsStructureType===c.LONG_STRING||a.cmsStructureType===c.SHORT_STRING||a.cmsStructureType===c.LINK_TOGGLE)&&e.push({name:a.qualifier===d?"urlLink":a.qualifier,localized:a.localized?!0:!1})}),e.forEach(function(b){if("undefined"!=typeof a[b.name]&&b.name in a)if(b.localized){var c=a[b.name].value;Object.keys(c).forEach(function(a){c[a]=f(c[a])})}else a[b.name]=f(a[b.name])}),a},r.prototype._fieldsAreUserChecked=function(){return this.fields.every(function(a){return!a.requiresUserCheck||a.isUserChecked})},r.prototype.onSubmit=function(){return this.fetch().then(e(this,function(a){var b=this._merge(a,this.component);b=this.sanitizePayload(b,this.fields),this.smarteditComponentId&&(b.identifier=this.smarteditComponentId);var c=this.smarteditComponentId?this.editorCRUDService.update(b):this.editorCRUDService.save(b);return c.then(function(a){return{payload:b,response:a}})}))},r.prototype.submit=function(a){var b=i.defer(),c=this.getComponent(a);return this.removeValidationErrors(),this.hasFrontEndValidationErrors=!1,this._fieldsAreUserChecked()?this.isDirty()&&a.$valid?this.onSubmit().then(e(this,function(c){this.pristine=g(c.payload),delete this.pristine.identifier;var d=this.smarteditComponentType+m;if(!this.smarteditComponentId&&l.has(d)){var e=l.get(d);e(this,c.response)}this.removeValidationErrors(),this.reset(a),b.resolve(this.pristine),this.updateCallback&&this.updateCallback(this.pristine,c.response)}),e(this,function(a){this.removeValidationErrors(),this._displayValidationErrors(a.data.errors);var c=this._collectUnrelatedValidationErrors(a.data.errors);c.length>0&&c.length===a.data.errors.length?(d.sendAsynchEvent(p,c),b.reject(!1)):b.reject(!0)})):b.resolve(c):(b.reject(!0),this.hasFrontEndValidationErrors=!0),b.promise},r.prototype._displayValidationErrors=function(a){var b=!1;return a.filter(function(a){return"ValidationError"===a.type}).forEach(e(this,function(a){var c=this.fields.filter(function(b){return b.qualifier===a.subject})[0];if(c){void 0===c.errors&&(c.errors=[]),b=!0;var d=a.message.match(/(Language: \[)[a-z]{2}\]/g);null!==d&&(d=d[0].match(/[a-z]+/g)[1],a.message=a.message.replace(/(Language: \[)[a-z]{2}\]\s*\.*/g,"")),c.errors.push({message:a.message,language:c.localized?d:c.qualifier})}})),b},r.prototype._collectUnrelatedValidationErrors=function(a){return a.filter(e(this,function(a){return"ValidationError"===a.type&&0===this.fields.filter(function(b){return b.qualifier===a.subject}).length}))},r.prototype.fieldAdaptor=function(a){return a.forEach(e(this,function(a){if(void 0===a.editable&&(a.editable=!0),!a.postfixText){var b=this.smarteditComponentType.toLowerCase()+"."+a.qualifier.toLowerCase()+".postfix.text",c=k.instant(b);a.postfixText=c!=b?c:""}})),this.linkToStatus=a.reduce(function(a,b){return"external"===b.qualifier&&(a.hasExternal=!0,a.externalI18nKey=b.i18nKey),"urlLink"===b.qualifier&&(a.hasUrlLink=!0,a.urlLinkI18nKey=b.i18nKey),a},{hasExternal:!1,hasUrlLink:!1,hasBoth:function(){return this.hasExternal&&this.hasUrlLink}}),this.linkToStatus.hasBoth()&&(a=a.filter(function(a){return"external"!==a.qualifier&&"urlLink"!==a.qualifier}),a.push({cmsStructureType:"LinkToggle",qualifier:o,i18nKey:"editor.linkto.label",externalI18nKey:"editor.linkto.external.label",internalI18nKey:"editor.linkto.internal.label"})),a},r.prototype.emptyUrlLink=function(){this.component.urlLink=""},r.prototype.refreshOptions=function(a,b,c){var d,f,g="fetch"+a.cmsStructureType+"DataHandler";a.localized?(d=this.component[a.qualifier].value[b],f=b):(d=this.component[a.qualifier],f=a.qualifier);var h=l.get(g);a.initiated=a.initiated||[],a.options=a.options||{},"Enum"===a.cmsStructureType&&a.initiated.push(f),a.initiated.indexOf(f)>-1?(c.length>2||"Enum"===a.cmsStructureType)&&h.findByMask(a,c).then(function(b){a.options[f]=b}):d?h.getById(a,d).then(e(a,function(b){a.options[f]=[b],a.initiated.push(f)})):a.initiated.push(f)},r.prototype.removeSelection=function(a,b){a.selected=void 0},r.prototype.tinymceOptions={force_p_newlines:!1,forced_root_block:"",force_br_newlines:!0,element_format:"html",verify_html:!1,entity_encoding:"raw",content_css:"static-resources/thirdparties/bootstrap/dist/css/bootstrap.min.css,static-resources/techne/css/techne.min.css,static-resources/dist/smartedit/css/style.css"},r.prototype._buildComparable=function(a){if(!a)return a;var b={},c=this.fields;return angular.forEach(a,function(a,d){var e=c.filter(function(a){return a.qualifier===d&&"RichText"===a.cmsStructureType});1==e.length?b[d]=sanitizeHTML(a,e[0].localized):b[d]=a}),b},sanitizeHTML=function(a,b){var c=angular.copy(a);return b?angular.forEach(c.value,function(a,b){c.value[b]=a.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,"")}):c=c.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,""),c},r.prototype.isDirty=function(){return!angular.equals(this._buildComparable(this.pristine),this._buildComparable(this.component))},r.prototype.init=function(){var a=i.defer(),d=this.editorStructureService?this.editorStructureService.get({smarteditComponentType:this.smarteditComponentType}):i.when({attributes:this.structure});return d.then(e(this,function(d){c.get("experience").then(e(this,function(c){b.getLanguagesForSite(c.siteDescriptor.uid).then(e(this,function(b){this.languages=b,this.fields=this.fieldAdaptor(d.attributes),this.load().then(function(){a.resolve()},function(b){a.reject()})}),function(){j.error("GenericEditor failed to fetch storefront languages"),a.reject()})}))}),function(){j.error("GenericEditor.init failed"),a.reject()}),a.promise},r}]).directive("genericEditor",["GenericEditor","isBlank","$log","$q",function(a,b,c,d){return{templateUrl:"web/common/services/genericEditor/genericEditorTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{id:"=",smarteditComponentId:"=",smarteditComponentType:"=",structureApi:"=",structure:"=",contentApi:"=",content:"=",submit:"=",getComponent:"=",reset:"=",isDirty:"=",updateCallback:"="
},link:function(c,d,e){c.editor=new a({id:c.id,smarteditComponentType:c.smarteditComponentType,smarteditComponentId:c.smarteditComponentId,structureApi:c.structureApi,structure:c.structure,contentApi:c.contentApi,updateCallback:c.updateCallback,content:c.content}),c.editor.init(),c.editor.showReset=b(e.reset),c.editor.showSubmit=b(e.submit),c.submitButtonText="componentform.actions.submit",c.cancelButtonText="componentform.actions.cancel",c.reset=function(){return c.editor.reset(c.componentForm)},c.submit=function(){return c.editor.submit(c.componentForm)},c.getComponent=function(){return c.editor.getComponent(c.componentForm)},c.isDirty=function(){return c.editor.isDirty()},$(d.find(".no-enter-submit")[0]).bind("keypress",function(a){return 13===a.keyCode?!1:void 0}),c.editor.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},c.editor.dateOptions={formatYear:"yy",startingDay:1},c.editor.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate","MMM dd, yyyy hh:mm"],c.editor.format=c.editor.formats[4]}}}]).constant("RESPONSE_HANDLER_SUFFIX","GenericEditorResponseHandler"),angular.module("genericEditorFieldModule",["translationServiceModule","ui.bootstrap","ui.select","ui.tinymce","ngSanitize"]).directive("genericEditorField",["$sanitize",function(a){return{templateUrl:"web/common/services/genericEditor/genericEditorFieldTemplate.html",restrict:"E",transclude:!1,replace:!1,scope:{editor:"=",field:"=",model:"=",qualifier:"="},link:function(b,c,d){b.reassignUserCheck=function(){if(b.model&&b.qualifier&&b.model[b.qualifier]){var c=b.model[b.qualifier],d=a(c),e=d===c;b.field.requiresUserCheck=!e}}}}}]),angular.module("i18nInterceptorModule",["resourceLocationsModule","languageServiceModule"]).constant("temporaryKeys",{"ytabset.tabs.more":"More","configurationform.duplicate.entry.error":"This is a duplicate key","configurationform.json.parse.error":"this value should be a valid JSON format","configurationform.save.error":"Save error","configurationform.absoluteurl.check":"You have to accept the absolute URL as it can be considered dangerous to the system.","sync.confirmation.title":"Synchronize Catalog","cataloginfo.sync.initiated":"Sync Initiated","editor.richtext.check":"I acknowledge that the content I have entered can result in system errors.","alert.component.removed.from.slot":"The component {{componentID}} has been removed from slot {{slotID}}","compoment.confirmation.modal.cancel":"Cancel","component.confirmation.modal.save":"Save","simpleresponsivebannercomponent.media.postfix.text":"Be aware that media cannot be edited using current SmartEdit version (6.0). Media editing will be supported in upcoming version","cmsdraganddrop.error":"failed to remove the component {{sourceComponentId}} from slot {{targetSlotId}}. {{detailedError}}","external.content.could.not.be.loaded":"External content could not be loaded."}).constant("UNDEFINED_LOCALE","UNDEFINED").factory("i18nInterceptor",["$q","$injector","I18N_RESOURCE_URI","UNDEFINED_LOCALE","temporaryKeys",function(a,b,c,d,e){return{request:function(e){var f=a.defer(),g=/i18nAPIRoot\/([a-zA-Z_]+)$/;if(g.test(e.url)){var h=g.exec(e.url)[1];h===d&&(h=b.get("languageService").getBrowserLocale()),e.url=[c,h].join("/")}return f.resolve(e),f.promise},response:function(a){var d=new RegExp(c+"/([a-zA-Z_]+)$");if(a&&a.config&&a.config.url){var f=a.config.url;if(d.test(f)&&a.data.value&&(a.data=a.data.value),d.test(f))for(var g in e)a.data[g]||(a.data[g]=e[g])}return b.get("languageService").setInitialized(!0),a}}}]).config(["$httpProvider",function(a){a.interceptors.push("i18nInterceptor")}]),angular.module("languageInterceptorModule",["functionsModule","sharedDataServiceModule","resourceLocationsModule"]).factory("languageInterceptor",["sharedDataService","CMSWEBSERVICES_RESOURCE_URI","LANGUAGE_RESOURCE_URI","SITES_RESOURCE_URI","CATALOG_VERSION_DETAILS_RESOURCE_URI","I18N_RESOURCE_URI","$translate","$injector","$q",function(a,b,c,d,e,f,g,h,i){function j(a,b){return p[b]||(p[b]=new RegExp(b.replace(/\:.*\//g,".*/")+"$")),p[b].test(a)}function k(a,b){return q[b]||(q[b]=new RegExp(b.replace(/\:.*\//g,".*/"))),q[b].test(a)}function l(a){return a&&a.url&&k(a.url,b)&&!k(a.url,f)&&!k(a.url,c)}function m(a){return a&&a.url&&(j(a.url,d)||k(a.url,e))}function n(b){return a.get("defaultToolingLanguage").then(function(a){var c=h.has("languageService")&&h.get("languageService"),d=c.getBrowserLanguageIsoCode();return b.headers["hybris-languages"]=a&&d!==a?d+","+a:d,b.headers["Accept-Language"]="",b})}function o(b){var c=i.defer();return b.headers["Accept-Language"]="",a.get("experience").then(function(a){var d=h.has("languageService")&&h.get("languageService");a&&d?d.getLanguagesForSite(a.siteDescriptor.uid).then(function(a){b.headers["hybris-languages"]=a.map(function(a){return a.isocode}).join(","),c.resolve(b)},function(){c.resolve(b)}):c.resolve(b)},function(){c.resolve(b)}),c.promise}var p={},q={},r=function(a){return m(a)?n(a):l(a)?o(a):i.when(a)};return{request:r}}]).config(["$httpProvider",function(a){a.interceptors.push("languageInterceptor")}]),angular.module("languageServiceModule",["restServiceFactoryModule","resourceLocationsModule"]).factory("languageService",["restServiceFactory","LANGUAGE_RESOURCE_URI","$q",function(a,b,c){var d={},e=a.get(b),f=c.defer();return{getBrowserLanguageIsoCode:function(){return(navigator.language||navigator.userLanguage).split("-")[0]},setInitialized:function(a){a===!0?f.resolve():f.reject()},isInitialized:function(){return f.promise},getBrowserLocale:function(){return locale=(navigator.language||navigator.userLanguage).split("-"),1===locale.length?locale[0]:locale[0]+"_"+locale[1].toUpperCase()},getLanguagesForSite:function(a){return d[a]?c.when(d[a]):e.get({siteUID:a}).then(function(b){return d[a]=b.languages,d[a]})}}}]),angular.module("loadConfigModule",["functionsModule","ngResource","sharedDataServiceModule","resourceLocationsModule"]).factory("LoadConfigManager",["$resource","hitch","copy","$q","convertToArray","sharedDataService","$log","SMARTEDIT_ROOT","SMARTEDIT_RESOURCE_URI_REGEXP","CONFIGURATION_URI",function(a,b,c,d,e,f,g,h,i,j){var k=function(){this.editorViewService=a(j),this.configuration=[],this._convertToObject=function(a){var b=a.reduce(function(a,b,c,d){try{a[b.key]=JSON.parse(b.value)}catch(e){g.error("item _key_ from configuration contains unparsable JSON data _value_ and was ignored".replace("_key_",b.key).replace("_value_",b.value))}return a},{});return b.domain=i.exec(this._getLocation())[1],b.smarteditroot=b.domain+"/"+h,b},this._getLocation=function(){return document.location.href}};return k.prototype._parse=function(a){var b=c(a);return Object.keys(b).forEach(function(a){try{b[a]=JSON.parse(b[a])}catch(c){}}),b},k.prototype.loadAsArray=function(){var a=d.defer();return this.editorViewService.query().$promise.then(b(this,function(b){a.resolve(this._parse(b))}),function(b){g.log("load failed"),a.reject()}),a.promise},k.prototype.loadAsObject=function(){var a=d.defer();return this.loadAsArray().then(b(this,function(b){var c=this._convertToObject(b);f.set("configuration",c),a.resolve(c)}),function(b){a.reject()}),a.promise},k}]).factory("loadConfigManagerService",["LoadConfigManager",function(a){return new a}]),angular.module("localizedElementModule",["tabsetModule"]).directive("localizedElement",function(){return{templateUrl:"web/common/services/localizedElement/localizedElementTemplate.html",restrict:"E",transclude:!1,replace:!1,scope:{model:"=",languages:"=",inputTemplate:"="},link:function(a,b,c){a.tabs=[],a.$watch("model",function(b){if(b){var d=a.inputTemplate?a.inputTemplate:c.inputTemplate;a.tabs.length=0,Array.prototype.push.apply(a.tabs,a.languages.map(function(a){return{id:a.isocode,title:a.isocode.toUpperCase()+(a.required?"*":""),templateUrl:d}}))}}),a.$watch("model.field.errors",function(b){if(a.model){var c=b?b.reduce(function(a,b){return a[b.language]=!0,a},{}):{};a.tabs.forEach(function(a){var b=c[a.id];a.hasErrors=void 0!==b?b:!1})}},!0)}}}),angular.module("modalServiceModule",["ui.bootstrap","translationServiceModule","functionsModule","coretemplates"]).constant("MODAL_BUTTON_ACTIONS",{NONE:"none",CLOSE:"close",DISMISS:"dismiss"}).constant("MODAL_BUTTON_STYLES",{DEFAULT:"default",PRIMARY:"primary",SECONDARY:"default"}).factory("modalService",["$modal","$controller","$rootScope","$templateCache","$translate","$log","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES","merge","copy","hitch","generateIdentifier",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b,c=!0,d=null,f=[];if(!a.modalInstance)throw"no.modalInstance.injected";if(this.closeFunction=a.modalInstance.close,this.dismissFunction=a.modalInstance.dismiss,this._defaultButtonOptions={id:"button.id",label:"button.label",action:g.NONE,style:h.PRIMARY,disabled:!1,callback:null},this._createButton=function(a){var b=j(this._defaultButtonOptions);i(b,a||{}),e(b.label).then(function(a){b.label=a});var c=!1;for(var d in h)if(h[d]===b.style){c=!0;break}if(!c)throw"modalService.ModalManager._createButton.illegal.button.style";var f=!1;for(var k in g)if(g[k]===b.action){f=!0;break}if(!f)throw"modalService.ModalManager._createButton.illegal.button.action";return b},this.title="","string"==typeof a.title&&(this.title=a.title),"string"==typeof a.titleSuffix&&(this.titleSuffix=a.titleSuffix),a.buttons)for(var l=0;l<a.buttons.length;l++)f.push(this._createButton(a.buttons[l]));this._buttonPressed=function(a){var c=null;if(a.callback?c=a.callback():b&&(c=b(a.id)),a.action==g.NONE);else{var d=a.action==g.CLOSE?this.close:this.dismiss;c?c.then(k(this,function(a){d.call(this,a)})):d.call(this)}},this._handleDismissButton=function(){if(d){var a=d();a.then(k(this,function(a){this.dismiss(a)}))}else this.dismiss()},this._showDismissButton=function(){return c},this._hasButtons=function(){return f.length>0},this.addButton=function(a){var b=this._createButton(a);return f.push(b),b},this.getButtons=function(){return f},this.removeAllButtons=function(){f.splice(0,f.length)},this.removeButton=function(a){for(var b=f.length-1;b>=0;b--)f[b].id==a&&f.splice(b,1)},this.enableButton=function(a){for(var b=0;b<f.length;b++)f[b].id==a&&(f[b].disabled=!1)},this.disableButton=function(a){for(var b=0;b<f.length;b++)f[b].id==a&&(f[b].disabled=!0)},this.getButton=function(a){for(var b=0;b<f.length;b++)if(f[b].id==a)return f[b];return null},this.setShowHeaderDismiss=function(a){if("boolean"!=typeof a)throw"modalService.ModalManager.showDismissX.illegal.param";c=a},this.setDismissCallback=function(a){d=a},this.setButtonHandler=function(a){b=a}}function n(a){var c=this;return["$scope","$modalInstance",function(e,f){a.modalInstance=f,this._modalManager=new m(a),c._modalManager=this._modalManager,a.controller&&(angular.extend(this,b(a.controller,{$scope:e,modalManager:this._modalManager})),this.init&&this.init()),a.templateInline?(this.templateUrl="modalTemplateKey"+btoa(l()),d.put(this.templateUrl,a.templateInline)):this.templateUrl=a.templateUrl,this.close=k(this,function(a){this._modalManager.close(a),d.remove(this.templateUrl)}),this.dismiss=k(this,function(a){this._modalManager.dismiss(a),d.remove(this.templateUrl)})}]}function o(){}return m.prototype.close=function(a){this.closeFunction&&this.closeFunction(a)},m.prototype.dismiss=function(a){this.dismissFunction&&this.dismissFunction(a)},o.prototype.open=function(b){var c=b||{};if(!c.templateUrl&&!c.templateInline)throw"modalService.configuration.errors.no.template.provided";if(c.templateUrl&&c.templateInline)throw"modalService.configuration.errors.2.templates.provided";return a.open({templateUrl:"web/common/services/modalTemplate.html",size:c.size||"lg",backdrop:"static",keyboard:!1,controller:n.call(this,c),controllerAs:"modalController",windowClass:c.cssClasses||null}).result},new o}]),angular.module("previewTicketInterceptorModule",["functionsModule"]).factory("previewTicketInterceptor",["$q","parseQuery","hitch",function(a,b,c){var d=function(){var a;return a=window.frameElement?document.location.href:$("iframe").attr("src")},e=function(a){var c=this._getLocation();if(c){var d=b(c).cmsTicketId;d&&(a.headers=a.headers||[],a.headers["X-Preview-Ticket"]=d)}return a},f={};return f.request=c(f,e),f._getLocation=c(f,d),f}]).config(["$httpProvider",function(a){a.interceptors.push("previewTicketInterceptor")}]),function(){var a="/storefront";angular.module("resourceLocationsModule",[]).constant("SMARTEDIT_ROOT","smartedit").constant("SMARTEDIT_RESOURCE_URI_REGEXP",/^(.*)\/smartedit/).constant("CONFIGURATION_URI","/smartedit/configuration/:key").constant("CMSWEBSERVICES_RESOURCE_URI","/cmswebservices").constant("DEFAULT_AUTHENTICATION_ENTRY_POINT","/authorizationserver/oauth/token").constant("I18N_RESOURCE_URI","/smarteditwebservices/v1/i18n/languages").constant("LANGUAGE_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/languages").constant("CATALOG_VERSION_DETAILS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogversiondetails").constant("SITES_RESOURCE_URI","/cmswebservices/v1/sites").constant("LANDING_PAGE_PATH","/").constant("STOREFRONT_PATH",a+"/:siteId/:catalogId/:catalogVersion").constant("STORE_FRONT_CONTEXT",a).constant("CATALOGS_PATH","/cmswebservices/v1/catalogs/").constant("MEDIA_PATH","/cmswebservices/v1/media").constant("CMSWEBSERVICES_PATH","/cmswebservices").constant("PREVIEW_RESOURCE_URI","/previewwebservices/v1/preview").constant("ENUM_RESOURCE_URI","/cmswebservices/v1/enums").constant("SYNC_PATH","/cmswebservices/v1/catalogs/:catalog/versions/Staged/synchronizations/versions/Online")}(),angular.module("restServiceFactoryModule",["ngResource","functionsModule"]).factory("restServiceFactory",["$resource","$q","hitch","copy","isBlank",function(a,b,c,d,e){var f={"x-requested-with":"Angular"},g=d(f);g.Pragma="no-cache";var h={getById:{method:"GET",params:{},isArray:!1,cache:!1,headers:g},get:{method:"GET",params:{},isArray:!1,cache:!1,headers:g},query:{method:"GET",params:{},isArray:!0,cache:!1,headers:g},page:{method:"GET",params:{},isArray:!1,cache:!1,headers:g,transformResponse:function(a,b){var c=e(a)?{}:angular.fromJson(a);return c.headers=b(),c}},update:{method:"PUT",cache:!1,headers:f},save:{method:"POST",cache:!1,headers:f},remove:{method:"DELETE",cache:!1,headers:f}},i={},j="identifier",k=null,l=function(a,e,f){void 0===f&&(f={});var g=b.defer(),h="object"==typeof f?Object.keys(f).reduce(c(this,function(a,b,c,d){return(new RegExp(":"+b+"/").test(this.uri)||new RegExp(":"+b+"$").test(this.uri)||new RegExp(":"+b+"&").test(this.uri))&&(a[b]=f[b]),a}),{}):{};if("getById"==a){var i=f;f={},f[this.IDENTIFIER]=i}if("update"==a||"remove"==a){if(!f[this.IDENTIFIER])return g.reject("no data was found under the "+this.IDENTIFIER+" field of object "+JSON.stringify(f)+", it is necessary for update and remove operations"),g.promise;h[this.IDENTIFIER]=f[this.IDENTIFIER],"remove"==a&&(f={})}return("get"==a||"getById"==a||"query"==a||"page"==a)&&(h=d(f),f={}),this[a](h,f).$promise.then(function(a){g.resolve(a)},function(a){g.reject(a)}),g.promise};return{IDENTIFIER:function(){return j},setDomain:function(a){k=a},getDomain:function(){return k},get:function(b,d){d||(d=j);var f=i[b];if("undefined"!=typeof f)return f;var g="";g=/^https?\:\/\//.test(b)||/^\//.test(b)?b:e(k)?b:k+"/"+b;var m=g;-1==m.indexOf(":"+d)&&(m+="/:"+d),f=a(m,{},h);var n={};return["save","remove"].concat(Object.keys(h)).forEach(function(a){n[a]=c(f,l,a,g)}),i[b]=n,f.uri=m,f.IDENTIFIER=d,n}}}]),function(){angular.module("tabsetModule",["ui.bootstrap","coretemplates","functionsModule","eventServiceModule","translationServiceModule"]).directive("yTabset",["$log","$q","systemEventService",function(a,b,c){return{restrict:"E",transclude:!1,templateUrl:"web/common/services/tabset/yTabsetTemplate.html",scope:{model:"=",tabsList:"=",tabControl:"=",numTabsDisplayed:"@"},link:function(a,b,c){var d=0;a.$watch(function(){return d!==a.tabsList.length},function(){a.initializeTabs(),d=a.tabsList.length}),a.initializeTabs=function(){if(a.tabsList&&a.tabsList.length>0){a.selectedTab=a.tabsList[0];for(var b in a.tabsList){var c=a.tabsList[b];c.active="0"===b,c.hasErrors=!1}}},a.selectTab=function(b){b&&(a.selectedTab.active=!1,a.selectedTab=b,a.selectedTab.active=!0)},a.dropDownHasErrors=function(){var b=a.tabsList.slice(a.numTabsDisplayed);return b.some(function(a){return a.hasErrors})},a.markTabsInError=function(b){a.resetTabErrors();var c,d=function(a){return a.id===c};for(var e in b){c=b[e];var f=a.tabsList.filter(d);f[0]&&(f[0].hasErrors=!0)}},a.resetTabErrors=function(){for(var b in a.tabsList)a.tabsList[b].hasErrors=!1},a.initializeTabs()}}}]).directive("yTab",["$log","$templateCache","$compile","$q","hitch","systemEventService",function(a,b,c,d,e,f){return{restrict:"E",transclude:!0,scope:{content:"=",model:"=",tabControl:"=",tabId:"@"},link:function(a,d,f){var g=b.get(a.content),h=c(g),i=h(a);d.append(i),a.tabControl&&e(this,a.tabControl(a))}}}])}(),angular.module("translationServiceModule",["pascalprecht.translate","i18nInterceptorModule"]).config(["$translateProvider","UNDEFINED_LOCALE",function(a,b){a.useStaticFilesLoader({prefix:"/i18nAPIRoot/",suffix:""}),a.preferredLanguage(b)}]).factory("i18n",["$translate",function(a){return{translate:function(b,c){c=c||{},"string"==typeof c&&(c=JSON.parse(c.replace(/'/g,'"'))),c instanceof Array&&(c=c.reduce(function(a,b,c,d){return a[c]=b,a},{}));var d=a.instant(b),e=/\{0\}/.exec(d)?!0:!1;return Object.keys(c).reduce(function(a,b,d,f){var g=e?d:b,h=new RegExp("\\{\\{"+g+"\\}\\}","g"),i=new RegExp("\\{"+g+"\\}","g"),j=c[b];return a.replace(h,j).replace(i,j)},d)}}}]).filter("i18n",["i18n",function(a){return function(b,c){return a.translate(b,c)}}]),angular.module("coretemplates",[]).run(["$templateCache",function(a){"use strict";a.put("web/common/core/services/loginDialog.html",'<div data-ng-cloak data-ng-class="{\'smartEditLogin\':modalController.initialized!==true, \'smartEditLoginModal\':modalController.initialized!==false, \'vertical-center\':true}">\n    <div class="ySELoginContent">\n        <div class="row text-center ySELogo">\n            <img src="static-resources/images/SmartEditLogo.png">\n        </div>\n        <form data-ng-submit="modalController.submit(loginDialogForm)" class="signinForm" name=\'loginDialogForm\' novalidate>\n            <div class="row ySELoginAuthMessage" data-ng-show="modalController.initialized!==false">\n                <div data-ng-class="{\'col-xs-8 col-xs-push-2 text-center\':true}" data-translate="logindialogform.reauth.message1"></div>\n                <div data-ng-class="{\'col-xs-8 col-xs-push-2 text-center\':true}" data-translate="logindialogform.reauth.message2"></div>\n            </div>\n            <div class="row form-group hyLoginError" data-ng-if="loginDialogForm.posted && loginDialogForm.$invalid && (logindialogform.username.$error.required || logindialogform.password.$error.required)">\n                <div data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false, \'alert alert-error-bluebg errorDiv\':true}" id="requiredError" data-translate="logindialogform.username.and.password.required"></div>\n            </div>\n            <div class="row form-group hyLoginError" data-ng-if="loginDialogForm.failed">\n                <div data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false, \'alert alert-error-bluebg errorDiv\':true}" id="invalidError" data-translate="logindialogform.username.or.password.invalid"></div>\n            </div>\n            <div class="row form-group ">\n                <input data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false}" type="text" id="username_{{modalController.authURIKey}}" name="username" placeholder="{{ \'authentication.form.input.username\' | translate}}" autofocus data-ng-model="modalController.auth.username" required/>\n            </div>\n            <div class="row form-group">\n                <input data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false}" type="password" id=\'password_{{modalController.authURIKey}}\' name=\'password\' placeholder="{{ \'authentication.form.input.password\' | translate}}" data-ng-model="modalController.auth.password" required/>\n            </div>\n            <div class="row form-group top-buffer2">\n                <button data-ng-class="{\'btn btn-lg btn-primary\':true, \'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false, \'text-uppercase\':true}" id="submit_{{modalController.authURIKey}}" name="submit" type="submit" data-translate="authentication.form.button.submit"></button>\n            </div>\n        </form>\n    </div>\n</div>'),a.put("web/common/core/services/waitDialog.html",'<div class="row">\n    <div class="col-xs-8">\n        <span data-translate="wait.dialog.message"></span>\n    </div>\n    <div class="col-xs-4">\n        <div class="spinner pull-right">\n            <div class="spinner-container spinner-container1">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n            <div class="spinner-container spinner-container2">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n            <div class="spinner-container spinner-container3">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("web/common/services/alerts/alertsTemplate.html",'<div class="row-fluid" data-ng-if="alerts!=null &amp;&amp; alerts.length>0">\n    <div data-ng-repeat="alert in alerts" class="ng-class: {\'col-xs-12\':true, \'alert\':true, \'alert-danger\':(alert.successful==false),\'alert-success\':(alert.successful==true)};">\n        <button type="button" class="close" data-ng-hide="alert.closeable==false" data-ng-click="dismissAlert($index);">&times;</button>\n        <span id="alertMsg">{{alert.message | translate}}</span>\n    </div>\n</div>'),a.put("web/common/services/genericEditor/dateTimePicker/dateTimePickerTemplate.html",'<div class="input-group date ySEDateField" data-ng-class="{\'ySEDataDisabled\':!isEditable}" id="date-time-picker-{{name}}">\n    <input type=\'text\' class="form-control" placeholder="{{ placeholderText | translate}}" ng-disabled="!isEditable" name="{{name}}" data-ng-model="model" />\n    <span class="input-group-addon" data-ng-show="isEditable">\n        <span class="glyphicon glyphicon-calendar"></span>\n    </span>\n</div>'),a.put("web/common/services/genericEditor/genericEditorFieldTemplate.html",'<div data-ng-switch="field.cmsStructureType" validation-id="{{field.qualifier}}" data-ng-cloack class="ySEField">\n\n    <div data-ng-if="field.prefixText" class="ySEText ySEFieldPrefix">{{field.prefixText | translate}}</div>\n    <div data-ng-switch-when="Boolean">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/booleanTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="ShortString">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/shortStringTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="LongString">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/longStringTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="RichText">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/richTextTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="LinkToggle">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/linkToggleTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Media">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/mediaTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Dropdown">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/dropdownTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Date">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/dateTimePickerWrapperTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Enum">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/enumTemplate.html\'"></div>\n    </div>\n    <div data-ng-include="\'web/common/services/genericEditor/templates/errorMessageTemplate.html\'"></div>\n    <div data-ng-if="field.postfixText" class="ySEText ySEFieldPostfix">{{field.postfixText | translate}}</div>\n</div>'),a.put("web/common/services/genericEditor/genericEditorFieldWrapperTemplate.html",'<generic-editor-field data-editor="model.editor" data-field="model.field" data-model="model.editor.component[model.field.qualifier].value" data-qualifier="tabId" />'),a.put("web/common/services/genericEditor/genericEditorTemplate.html",'<div data-ng-cloak class="ySEGenericEditor">\n    <div>\n        <alerts-box alerts="editor.alerts" />\n    </div>\n    <form name="componentForm" novalidate data-ng-submit="editor.submit(componentForm)" class="col-xs-12 no-enter-submit">\n        <div class="modal-header" data-ng-show="modalHeaderTitle">\n            <h4 class="modal-title">{{modalHeaderTitle| translate}}</h4>\n        </div>\n        <div class="ySErow" data-ng-repeat="holder in editor.holders;" data-ng-switch="field.cmsStructureType">\n            <div class="">\n                <label id="{{holder.field.qualifier}}-label">{{holder.field.i18nKey | lowercase | translate}}\n                    <span data-ng-if="holder.field.required">*</span>\n                </label>\n\n            </div>\n            <div class="" id="{{holder.field.qualifier}}">\n                <localized-element data-ng-if="holder.field.localized" data-model="holder" data-languages="editor.languages" data-input-template="web/common/services/genericEditor/genericEditorFieldWrapperTemplate.html"></localized-element>\n                <generic-editor-field data-ng-if="!holder.field.localized" data-editor="holder.editor" data-field="holder.field" data-model="editor.component" data-qualifier="holder.field.qualifier" />\n            </div>\n        </div>\n        <div class="ySEBtnRow modal-footer" data-ng-show="(editor.alwaysShowReset || (editor.showReset===true && editor.isDirty())) || (editor.alwaysShowSubmit || (editor.showSubmit===true && editor.isDirty() && componentForm.$valid))">\n            <button type="button" id="cancel" class="btn btn-subordinate" data-ng-if="editor.alwaysShowReset || (editor.showReset===true && editor.isDirty())" data-ng-click="reset()">{{cancelButtonText| translate}}</button>\n            <button type="submit" id="submit" class="btn btn-primary" data-ng-if="editor.alwaysShowSubmit || (editor.showSubmit===true && editor.isDirty() && componentForm.$valid)" data-ng-disabled="!(editor.isDirty() && componentForm.$valid)">{{submitButtonText| translate}}</button>\n        </div>\n    </form>\n</div>'),a.put("web/common/services/genericEditor/templates/booleanTemplate.html",'<div class="ySEBooleanField">\n    <span class="y-toggle y-toggle-lg">\n        <input type="checkbox" id="{{field.qualifier}}-checkbox" class="" placeholder="{{field.tooltip| translate}}" name="{{field.qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" />\n        <label for="{{field.qualifier}}-checkbox"></label>\n    </span>\n</div>'),a.put("web/common/services/genericEditor/templates/dateTimePickerWrapperTemplate.html",'<date-time-picker data-name="field.qualifier" data-model="model[qualifier]" data-is-editable="field.editable"></date-time-picker>'),a.put("web/common/services/genericEditor/templates/dropdownTemplate.html",'<ui-select id="{{field.qualifier}}-selector" ng-model="model[qualifier]" theme="select2" title="" style="width:100%" search-enabled="false" data-dropdown-auto-width="false">\n    <ui-select-match placeholder="Select an option">\n        <span ng-bind="$select.selected.label"></span>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list" repeat="option in field.options" position="down" value="{{$selected.selected}}">\n        <span ng-bind="option.label"></span>\n    </ui-select-choices>\n</ui-select>'),a.put("web/common/services/genericEditor/templates/enumTemplate.html",'<ui-select id="{{field.qualifier}}-selector" ng-model="model[qualifier]" theme="select2" data-ng-disabled="!field.editable" reset-search-input="false" title="" style="width:100%">\n    <ui-select-match placeholder="{{\'genericeditor.dropdown.placeholder\' | translate}}" allow-clear="true">\n        <span id="enum-{{field.qualifier}}">{{$select.selected.label}}</span>\n        <br/>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list" repeat="option.code as option in field.options[qualifier]" refresh="editor.refreshOptions(field, qualifier, $select.search)" value="{{$select.selected.code}}" refresh-delay="0" position="down">\n        <small>\n            <span>{{option.label}}</span>\n        </small>\n    </ui-select-choices>\n</ui-select>'),a.put("web/common/services/genericEditor/templates/errorMessageTemplate.html",'<span data-ng-if="field.errors" data-ng-repeat="error in field.errors | filter:{language:qualifier}" id=\'validation-error-{{field.qualifier}}-{{qualifier}}-{{$index}}\' class="error-input help-block">\n    {{error.message|translate}}\n</span>'),a.put("web/common/services/genericEditor/templates/linkToggleTemplate.html",'<div>\n    <input type="radio" name="external" id="external" data-ng-model="model.external" data-ng-value="true" data-ng-change="editor.emptyUrlLink()" />\n    <label>{{field.externalI18nKey| translate}}</label>\n    <input type="radio" name="external" id="internal" data-ng-model="model.external" data-ng-value="false" data-ng-change="editor.emptyUrlLink()" />\n    <label>{{field.internalI18nKey| translate}}</label>\n    <br/>\n    <input type="text" id="urlLink" name="urlLink" data-ng-model="model.urlLink" class="col-xs-12 form-control" />\n</div>'),a.put("web/common/services/genericEditor/templates/longStringTemplate.html",'<textarea class="ng-class:{\'col-xs-12\':true, \'has-error\':field.errors.length>0}" placeholder="{{field.tooltip| translate}}" name="{{field.qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" data-ng-maxlength="1000"></textarea>'),a.put("web/common/services/genericEditor/templates/mediaTemplate.html",'<ui-select id="{{field.qualifier}}-selector" ng-model="model[qualifier]" theme="select2" data-ng-disabled="!field.editable" reset-search-input="false" title="" style="width:100%">\n    <ui-select-match placeholder="{{\'genericeditor.dropdown.placeholder\' | translate}}" allow-clear="true">\n        <img class="thumbnail" id="image-{{field.qualifier}}" data-ng-src={{$select.selected.url}}>\n        <span>{{$select.selected.code}}</span>\n        <br/>\n        <a href="#" id="{{field.qualifier}}-replaceImage" data-ng-click="editor.removeSelection($select, $event)" data-translate="componentform.actions.replaceimage"></a>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list" repeat="option.code as option in field.options[qualifier]" refresh="editor.refreshOptions(field, qualifier, $select.search)" value="{{$select.selected.code}}" refresh-delay="0" position="down">\n        <small>\n            <img class="thumbnail" data-ng-src={{option.url}}>\n            <span>{{option.code}}</span>\n        </small>\n    </ui-select-choices>\n</ui-select>'),
a.put("web/common/services/genericEditor/templates/richTextTemplate.html",'<textarea class="ng-class:{\'col-xs-12\':true, \'has-error\':field.errors.length>0}" data-ui-tinymce="editor.tinymceOptions" name="{{field.qualifier}}-{{qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" data-ng-change="reassignUserCheck()"></textarea>\n\n\n\n<div data-ng-if="field.requiresUserCheck">\n    <input type="checkbox" data-ng-model="field.isUserChecked" />\n\n\n    <span class="ng-class:{\'warning-check-msg\':true, \'not-checked\':editor.hasFrontEndValidationErrors && !field.isCheckedByUser}" data-translate="editor.richtext.check">{{\'editor.richtext.check"\' | translate}}</span>\n</div>'),a.put("web/common/services/genericEditor/templates/shortStringTemplate.html",'<input type="text" id="{{field.qualifier}}-shortstring" class="ng-class:{\'col-xs-12\':true, \'form-control\':true, \'has-error\':field.errors.length>0} " placeholder="{{field.tooltip| translate}}" name="{{field.qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" />'),a.put("web/common/services/localizedElement/localizedElementTemplate.html",'<y-tabset data-model="model" tabs-list="tabs" data-num-tabs-displayed="3">\n</y-tabset>'),a.put("web/common/services/modalTemplate.html",'<div class="modal-header" data-ng-if="modalController._modalManager.title">\n    <button type="button" class="close" data-ng-if="modalController._modalManager._showDismissButton()" data-ng-click="modalController._modalManager._handleDismissButton()">\n        <span class="hyicon hyicon-close"></span>\n    </button>\n    <h4 id="smartedit-modal-title-{{ modalController._modalManager.title }}">{{ modalController._modalManager.title | translate }}&nbsp;{{ modalController._modalManager.titleSuffix | translate }}</h4>\n</div>\n<div class="modal-body" id="modalBody">\n    <div data-ng-include="modalController.templateUrl" />\n</div>\n<div class="modal-footer" data-ng-if="modalController._modalManager._hasButtons()">\n    <span data-ng-repeat="button in modalController._modalManager.getButtons()">\n'+"        <button id='{{ button.id }}' type=\"button\" data-ng-disabled=\"button.disabled\" data-ng-class=\"{ 'btn':true, 'btn-subordinate':button.style=='default', 'btn-primary':button.style=='primary' }\" data-ng-click=\"modalController._modalManager._buttonPressed(button)\">{{ button.label | translate }}</button>\n    </span>\n</div>"),a.put("web/common/services/tabset/yTabsetTemplate.html",'<div>\n    <ul class="nav nav-tabs">\n        <li data-ng-repeat="tab in tabsList.slice( 0, numTabsDisplayed ) track by $index" data-ng-class="{\'active\': tab.active }" data-tab-id="{{tab.id}}">\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)" data-ng-if="!tab.message">{{tab.title | translate}}</a>\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)" data-ng-if="tab.message" data-popover="{{tab.message}}" data-popover-trigger="mouseenter">{{tab.title | translate}}</a>\n        </li>\n\n        <li data-ng-if="tabsList.length > numTabsDisplayed" class="dropdown" data-ng-class="{\'active\': tabsList.indexOf(selectedTab) >= numTabsDisplayed}">\n            <a data-ng-class="{\'sm-tab-error\': dropDownHasErrors()}" class="dropdown-toggle" data-toggle="dropdown" data-translate="ytabset.tabs.more">\n                <span class="caret"></span>\n\n\n\n            </a>\n            <ul class="dropdown-menu">\n                <li data-ng-repeat="tab in tabsList.slice( numTabsDisplayed )" data-tab-id="{{tab.id}}">\n                    <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)">{{tab.title | translate}}</a>\n                </li>\n            </ul>\n        </li>\n\n    </ul>\n\n    <div>\n        <y-tab data-ng-repeat="tab in tabsList" ng-show="tab.active" data-tab-id="{{tab.id}}" content="tab.templateUrl" data-model="model" tab-control="tabControl">\n        </y-tab>\n    </div>\n</div>'),a.put("web/smarteditcontainer/core/services/experienceSelectorWidget/experienceSelectorWidgetTemplate.html",'<div dropdown is-open="status.isopen" auto-close="disabled">\n    <button type="button" dropdown-toggle id="experience-selector-btn" class="btn yWebsiteSelectBtn" aria-pressed="false" title="{{action.name}}" alt="{{action.name}}" ng-click="resetExperienceSelector()">\n        <span class="btn-text">{{buildExperienceText()}}</span>\n        <span class="hyicon hyicon-arrow "></span>\n    </button>\n    <div class="dropdown-menu bottom btn-block yDdResolution " role="menu">\n        <experience-selector data-experience="experience" data-dropdown-status="status" data-reset-experience-selector="resetExperienceSelector"></experience-selector>\n    </div>\n</div>'),a.put("web/smarteditcontainer/core/services/inflectionPointSelectorWidget/inflectionPointSelectorWidgetTemplate.html",'<div dropdown is-open="status.isopen" auto-close="disabled" id="inflectionPtDropdown">\n    <button type="button" class="btn btn-default yHybridAction yDddlbResolution" dropdown-toggle ng-disabled="disabled " aria-pressed="false">\n        <img data-ng-src="{{imageRoot}}{{currentPointSelected.icon}}" data-ng-typeSelected="{{currentPointSelected.type}}" />\n    </button>\n    <ul class="dropdown-menu bottom btn-block yDdResolution " role="menu">\n        <li ng-repeat="choice in points" class="item text-center">\n            <a href data-ng-click="selectPoint(choice);">\n                <img data-ng-show="currentPointSelected.type !== choice.type" data-ng-src="{{imageRoot}}{{choice.icon}}" class="file" />\n                <img data-ng-show="currentPointSelected.type === choice.type" data-ng-src="{{imageRoot}}{{choice.selectedIcon}}" class="file" />\n            </a>\n        </li>\n    </ul>\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/clonePage/clonePageTemplate.html",'<div id="clone-page-template">\n    {{ "template.clone.page.title" | translate }}\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/clonePage/clonePageWrapperTemplate.html",'<clone-page selected-item-callbacks="selectedItemCallbacks"></clone-page>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageInformation/pageInformationTemplate.html",'<div id="page-info-template">\n    {{ "template.page.information.title" | translate }}\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageInformation/pageInformationWrapperTemplate.html",'<page-information selected-item-callbacks="selectedItemCallbacks"></page-information>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageToolMenuTemplate.html",'<div>\n    <nav class="pageToolMenu">\n        <ul class="list-unstyled">\n            <li class="text-right yCloseToolbar">\n                <a id="page-tool-menu-close" href="#" class="nav-close" data-ng-click="closePageToolMenu($event)">\n                    <span class="hyicon hyicon-close"></span>\n                </a>\n            </li>\n        </ul>\n        <ul id="page-tool-menu-home" class="list-unstyled page-tool-menu">\n            <li class="text-left" data-ng-repeat="item in actions" data-ng-switch="item.type">\n                <div data-ng-switch-when="TEMPLATE" class="yTemplateToolbar">\n                    <div data-ng-include="item.include" data-ng-if="item.include"></div>\n                </div>\n\n                <div data-ng-switch-when="ACTION">\n                    <a href data-ng-click="triggerAction(item, $event)">\n                        <span id="{{toolbarName}}_option_{{$index}}" class="{{ item.className || \'yStatusDefault\' }}">\n                            <img data-ng-src="{{imageRoot}}{{item.icons.default}} " title="{{item.name | translate}}" alt="{{item.name | translate}}" />{{item.name | translate}}\n                        </span>\n                    </a>\n                </div>\n\n                <div data-ng-switch-when="HYBRID_ACTION" dropdown is-open="status.isopen ">\n                    <a href data-ng-click="triggerAction(item, $event)">\n                        <span id="{{toolbarName}}_option_{{$index}}" class="{{ item.className || \'yStatusDefault\' }}" dropdown-toggle>\n                            <img data-ng-src="{{imageRoot}}{{item.icons.default}} " title="{{item.name | translate}}" alt="{{item.name | translate}}" />{{item.name | translate}}\n                        </span>\n                    </a>\n                </div>\n\n                <div data-ng-switch-default></div>\n            </li>\n        </ul>\n        <ul class="list-unstyled page-tool-menu hideLevel2" id="page-tool-menu-selected-item">\n            <li class="text-left">\n                <a id="page-tool-menu-back-anchor" data-ng-click="showPageToolMenuHome()">\n                    <span id="page-tool-menu-back" class=" icon-back " />{{backButtonI18nKey | translate}}</a>\n            </li>\n            <li>\n                <div data-ng-include="selected.include" data-ng-if="selected.include"></div>\n            </li>\n        </ul>\n    </nav>\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageToolMenuWrapperTemplate.html",'<page-tool-menu data-image-root="imageRoot" data-toolbar-name="pageToolMenu"></page-tool-menu>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/syncStatus/syncStatusTemplate.html",'<a href>\n    <span class="yStatusInfo">\n        <img data-ng-src="{{imageRoot}}static-resources/images/icon_small_sync.png" />{{syncStatus | translate}}\n    </span>\n    <div class="yStatusSubtitle">{{syncDate | date : \'dd/MM/yy - h:mm:ss a\'}}</div>\n</a>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/syncStatus/syncStatusWrapperTemplate.html","<sync-status></sync-status>"),a.put("web/smarteditcontainer/core/services/topToolbars/deviceSupportTemplate.html",'<inflection-point-selector data-ng-hide="isLanding()"></inflection-point-selector>'),a.put("web/smarteditcontainer/core/services/topToolbars/experienceSelectorWrapperTemplate.html",'<div class="col-md-7 col-lg-7 yWebsite">\n    <ul class="nav nav-pills group yWebsiteTB">\n        <li class="yToolbarBtn text-center" id="option_{{$index}} ">\n            <experience-selector-button></experience-selector-button>\n        </li>\n    </ul>\n</div>'),a.put("web/smarteditcontainer/core/services/topToolbars/leftToolbarTemplate.html",'<div>\n    <nav class="leftNav">\n\n        <ul class="list-unstyled ySEUser left-toolbar">\n            <li class="text-right yCloseToolbar">\n                <a href="#" class="nav-close" data-ng-click="closeLeftToolbar($event)">\n                    <span class="hyicon hyicon-close"></span>\n                </a>\n            </li>\n            <li class="text-left yUserData">\n                <div class="yUserInfo">\n                    <p>{{\'left.toolbar.cmsuser.name\' | translate}}</p>\n                    <a href="#" id="" data-ng-click="signOut($event)">{{\'left.toolbar.sign.out\' | translate}}</a>\n                </div>\n            </li>\n            <li class="divider leftnavdivider"></li>\n        </ul>\n\n        <ul class="list-unstyled left-toolbar" id="hamburger-menu-level1">\n            <li class="leftnavitemlist"><a data-ng-click="showSites()">{{\'left.toolbar.sites\' | translate}}</span></a></li>\n            <li class="leftnavitemlist"><a id="configurationCenter" data-ng-click="showCfgCenter($event)">{{\'left.toolbar.configuration.center\' | translate}}<span class="icon "></span></a></li>\n        </ul>\n        <ul class="list-unstyled left-toolbar ySELeftHideLevel2" id="hamburger-menu-level2">\n            <li>\n                <a class="leftnavitemlist" data-ng-click="goBack()">\n                    <span class=" icon-back ">{{\'left.toolbar.back\' | translate}}</span>\n                </a>\n            </li>\n            <li class="leftnavitemlist">\n                <general-configuration/>\n            </li>\n        </ul>\n    </nav>\n\n    <div class="navbar-header pull-left leftNavBtn">\n        <button type="button " class="navbar-toggle collapsed " data-toggle="collapse " data-target="#bs-example-navbar-collapse-1 " id="nav-expander" data-ng-click="showToolbar($event) ">\n            <span class="sr-only ">{{\'left.toolbar.toggle.navigation\' | translate}}</span>\n            <span class="icon-bar "></span>\n            <span class="icon-bar "></span>\n            <span class="icon-bar "></span>\n        </button>\n    </div>\n\n</div>'),a.put("web/smarteditcontainer/core/services/topToolbars/leftToolbarWrapperTemplate.html",'<left-toolbar data-image-root="imageRoot"></left-toolbar>'),a.put("web/smarteditcontainer/core/services/topToolbars/logoTemplate.html",'<img data-ng-src="{{imageRoot}}static-resources/images/logo_smartEdit.png " class="ySmartEditAppLogo " alt="Smart Edit " />'),a.put("web/smarteditcontainer/core/toolbar/toolbarTemplate.html",'<div class=\'{{cssClass}}\'>\n\n    <div data-ng-repeat="item in actions | filter:{type:\'TEMPLATE\'}" class="yTemplateToolbar" data-ng-include="item.include" data-ng-if="item.include"></div>\n\n    <div class=\'{{actionsClasses}}\'>\n\n        <ul class="nav nav-pills group yPageTB pull-right">\n            <li class="yToolbarBtn text-center" data-ng-repeat="item in actions | filter:{type:\'!TEMPLATE\'}" data-ng-switch="item.type">\n                <div data-ng-switch-when="ACTION" class="btn-group ">\n                    <button type="button" dropdown-toggle="true" data-toggle="button" class="btn" aria-pressed="false" data-ng-click="triggerAction(item, $event)">\n                        <span>{{item.name | translate}}</span>\n                        <img id="{{toolbarName}}_option_{{$index}}" data-ng-src="{{imageRoot}}{{item.icons.default}} " class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}" />\n                    </button>\n                </div>\n\n                <div data-ng-switch-when="HYBRID_ACTION" class="btn-group ySEHybridAction" dropdown is-open="status.isopen ">\n                    <button data-ng-show="item.icons.default" type="button" class="btn btn-default yHybridAction yDddlbResolution" dropdown-toggle ng-disabled="disabled " aria-pressed="false " data-ng-click="triggerAction(item, $event)">\n                        <span>{{item.name | translate}}</span>\n                        <img id="{{toolbarName}}_option_{{$index}}" data-ng-src="{{imageRoot}}{{item.icons.default}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}" />\n                    </button>\n\n                    <div data-ng-include="item.include" data-ng-if="item.include"></div>\n\n                </div>\n                <div data-ng-switch-default></div>\n            </li>\n        </ul>\n    </div>\n</div>'),a.put("web/smarteditcontainer/fragments/landingPage.html",'<div class="ySmartEditToolbars" style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar" data-image-root="imageRoot" data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n</div>\n<div ng-class="{\'alert-overlay\': true, \'ySEEmptyMessage\': (!alerts || alerts.length == 0 ) }">\n    <alerts-box alerts="alerts" />\n</div>\n<div class="landingPageWrapper">\n    <div class="ySELandingTitle">\n        <h1 class="landing-page-title" data-translate=\'landingpage.title\'></h1>\n        <h4 class="landing-page-label" data-translate=\'landingpage.label\'></h4>\n    </div>\n    <div class="container-fluid ySELandingPage">\n        <div class="row">\n            <div class="ySECatalogEntry" data-ng-repeat="catalog in landingCtl.catalogs | startFrom:(landingCtl.currentPage-1)*landingCtl.CATALOGS_PER_PAGE | limitTo:landingCtl.CATALOGS_PER_PAGE">\n                <catalog-details catalog="catalog"></catalog-details>\n            </div>\n        </div>\n        <div class="pagination-container">\n            <pagination boundary-links="true" total-items="landingCtl.totalItems" items-per-page="landingCtl.CATALOGS_PER_PAGE" ng-model="landingCtl.currentPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\n        </div>\n    </div>\n</div>'),a.put("web/smarteditcontainer/fragments/mainview.html",'<div class="ySmartEditToolbars" style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar" data-image-root="imageRoot" data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n    <div>\n        <toolbar data-css-class="ySmartEditExperienceSelectorToolbar" data-image-root="imageRoot" data-toolbar-name="experienceSelectorToolbar"></toolbar>\n    </div>\n</div>\n<div ng-class="{\'alert-overlay\': true, \'ySEEmptyMessage\': (!alerts || alerts.length == 0 ) }">\n    <alerts-box alerts="alerts" />\n</div>\n<div id="js_iFrameWrapper" class="iframeWrapper">\n    <iframe src="" hy-dropabpe-iframe></iframe>\n</div>'),a.put("web/smarteditcontainer/modules/administrationModule/editConfigurationsTemplate.html",'<div id="editConfigurationsBody" class="ySEConfigBody">\n    <form name="form.configurationForm" novalidate data-ng-submit="editor.submit(form.configurationForm)">\n        <div class="row ySECfgTableHeader">\n            <div class="col-xs-3">\n                <label data-translate="configurationform.header.key.name"></label>\n            </div>\n            <div class="col-xs-9">\n                <label data-translate="configurationform.header.value.name"></label>\n            </div>\n        </div>\n        <div class="row ySECfgAddEntity">\n            <button class="y-add-btn" type="button" data-ng-click="editor.addEntry(); ">\n                <span class="hyicon hyicon-add "></span>\n                {{\'general.configuration.add.button\' | translate}}\n            </button>\n        </div>\n        <div class="row ySECfgEntity " data-ng-repeat="entry in editor.filterConfiguration() " data-ng-mouseenter="mouseenter() " data-ng-mouseout="mouseout() ">\n            <div class="col-xs-3 ">\n                <input type="text " class="ng-class:{ \'col-xs-12\':true, \'has-error\':entry.errors.keys.length>0}" name="{{entry.key}}_key" data-ng-model="entry.key" data-ng-required="true" data-ng-disabled="!entry.isNew" />\n                <span id="{{entry.key}}_error_{{$index}}" data-ng-if="entry.errors.keys" data-ng-repeat="error in entry.errors.keys" class="error-input help-block">\n                    {{error.message|translate}}\n                </span>\n            </div>\n            <div class="col-xs-8">\n                <textarea class="ng-class:{\'col-xs-12\':true, \'has-error\':entry.errors.values.length>0}" name="{{entry.key}}_value" data-ng-model="entry.value" data-ng-required="true" data-ng-change="editor._validateUserInput(entry)"></textarea>\n                <div data-ng-if="entry.requiresUserCheck">\n                    <input id="{{entry.key}}_absoluteUrl_check_{{$index}}" type="checkbox" data-ng-model="entry.isCheckedByUser" />\n                    <span id="{{entry.key}}_absoluteUrl_msg_{{$index}}" class="ng-class:{\'warning-check-msg\':true, \'not-checked\':entry.hasErrors && !entry.isCheckedByUser}">{{\'configurationform.absoluteurl.check\' | translate}}</span>\n                </div>\n\n                <span id="{{entry.key}}_error_{{$index}}" data-ng-if="entry.errors.values" data-ng-repeat="error in entry.errors.values" class="error-input help-block">\n                    {{error.message|translate}}\n                </span>\n            </div>\n            <div class="col-xs-1">\n                <button type="button" id="{{entry.key}}_removeButton_{{$index}}" class="btn btn-subordinate" data-ng-click="editor.removeEntry(entry, form.configurationForm);">\n                    <span class="hyicon hyicon-remove" aria-hidden="true"></span>\n                </button>\n            </div>\n        </div>\n    </form>\n</div>'),a.put("web/smarteditcontainer/modules/administrationModule/generalConfigurationTemplate.html",'<a id="generalConfiguration" data-ng-click="editConfiguration()">{{\'general.configuration.title\' | translate}}</a>'),a.put("web/smarteditcontainer/services/widgets/catalogDetails/catalogDetailsTemplate.html",'<div class="col-xs-12 col-sm-6 ySECatalog">\n    <div class="catalog-container">\n        <div class="catalog-body">\n            <div class="catalog-header row">\n                <h4>{{catalog.name}}</h4>\n            </div>\n\n            <div class="row">\n                <div data-ng-repeat="catalogVersion in catalog.catalogVersions" class="col-xs-6 catalog-version-item">\n                    <div class="catalog-version-container" data-ng-click="onCatalogSelect(catalogVersion)">\n                        <div class="catalog-thumbnail-default-img">\n                            <div class="catalog-thumbnail" style="background-image: url(\'{{catalogVersion.thumbnailUrl}}\');"></div>\n                        </div>\n                        <div class="catalog-version-info">{{catalogVersion.catalogVersion}}</div>\n                    </div>\n                </div>\n            </div>\n\n            <hr class="ySECatalogDivider" />\n            <div class="catalog-footer row">\n                <div data-ng-repeat="template in templates" ng-include="template.include" />\n            </div>\n        </div>\n    </div>\n</div>'),a.put("web/smartedit/core/decoratorFilter/managePerspectivesTemplate.html",'<div class="modal-header">\n    <h3 class="modal-title">{{ \'modal.perpectives.title\' | translate }}</h3>\n</div>\n<div class="modal-body">\n    <table>\n        <tr>\n            <td rowspan="2">\n                {{\'modal.perpectives.header.perspectives.name\' | translate}}\n                <div>\n                    <select size="12" data-ng-change="perspectiveChanged()" class="form-control" data-ng-options="p.name | translate for p in perspectives" data-ng-model="perspective"></select>\n                </div>\n                <button type="button" class="btn btn-default btn-xs" data-ng-click="createPerspective()">\n                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>\n                </button>\n                <button type="button" class="btn btn-danger btn-xs" data-ng-if="perspective.system !== true" data-ng-click="deletePerspective()">\n                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>\n                </button>\n            </td>\n            <td width="15px">\n            </td>\n            <td valign="top">\n                {{\'modal.perpectives.header.name.name\' | translate}}:\n                <span data-ng-if="perspective.system===true">\n                    <span style="padding-left: 5px">{{ perspective.name | translate }}</span>\n                    <span class=\'pull-right\' style="color: #feffc1; padding-left: 10px">{{ warningForSystem | translate }}</span>\n                </span>\n                <input style=\'padding-left: 5px; color: black\' data-ng-if="perspective.system!==true" type="text" data-ng-required="true" data-ng-trim="true" data-ng-change="nameChanged()" data-ng-disabled="perspective.system === true" data-ng-model="perspective.name">\n                <span style="color: #ff0e18">{{ renameError | translate }}</span>\n            </td>\n        </tr>\n        <tr>\n            <td width="25px">\n            </td>\n            <td>\n                {{\'modal.perpectives.header.decorators.name\' | translate}}\n                <div data-ng-repeat="ps in decoratorSet">\n                    <input type="checkbox" data-ng-model="ps.checked" data-ng-change="save()" data-ng-disabled="perspective.system === true"> {{ ps.name }}\n                </div>\n            </td>\n        </tr>\n    </table>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" data-ng-click="close()" data-translate="perspectives.actions.close"></button>\n</div>'),a.put("web/smartedit/core/decoratorFilter/perspectiveTemplate.html",'<div>\n    <span class="floating-perspective" data-ng-mouseleave="mouseOff()" data-ng-mouseenter="mouseOn()">\n        <div>\n            <span class="xposed-perspectives">\n                <span class="glyphicon glyphicon-th" aria-hidden="true"></span>\n            </span>\n        </div>\n        <div class="floating-bg" data-ng-show="!showButtonOnly()">\n            <div>\n                <span data-translate="modal.perpectives.header.perspectives.name"></span>\n            </div>\n            <div class="form-group form-inline">\n                <select data-ng-change="perspectiveSelected(perspective)" class="form-control" data-ng-options="p.name | translate for p in perspectives" ng-model="perspective" />\n                <button type="button" data-ng-click="manage()" class="btn btn-default" aria-hidden="true">\n                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>\n                </button>\n            </div>\n        </div>\n    </span>\n</div>\n<div data-ng-transclude></div>'),a.put("web/smartedit/modules/systemModule/features/contextualMenu/contextualMenuDecoratorTemplate.html",'<div class="cmsx-ctx-wrapper1">\n    <div class="cmsx-ctx-wrapper2">\n        <div class="decorative-top-border decorative-border" ng-if="active"></div>\n        <div class="decorative-right-border decorative-border" ng-if="active"></div>\n        <div class="decorative-bottom-border decorative-border" ng-if="active"></div>\n        <div class="decorative-left-border decorative-border" ng-if="active"></div>\n        <div class="contextualMenuOverlay" data-ng-show="active">\n            <div data-ng-repeat="item in getItems().leftMenuItems" class="btn btn-primary cmsx-ctx-btns" ng-init="itemsrc = item.iconIdle" ng-mouseout="itemsrc = item.iconIdle" ng-mouseover="itemsrc = item.iconNonIdle">\n                <span id="{{item.i18nKey | translate}}-{{smarteditComponentId}}-{{smarteditComponentType}}-{{$index}}" data-ng-if="item.iconIdle && isHybrisIcon(item.displayClass)" ng-click="item.callback(smarteditComponentType, smarteditComponentId, $event)" class="ng-class:{clickable:true}">\n                    <img ng-src="{{itemsrc}}" id="{{item.i18nKey | translate}}-{{smarteditComponentId}}-{{smarteditComponentType}}-{{$index}}" />\n                </span>\n                <img id="{{item.i18nKey | translate}}-{{smarteditComponentId}}-{{smarteditComponentType}}-{{$index}}" title="{{item.i18nKey | translate}}" data-ng-if="item.iconIdle && !isHybrisIcon(item.displayClass)" class="{{item.displayClass}}" ng-class="{clickable:true}" data-ng-click="item.callback(smarteditComponentType, smarteditComponentId, $event)" data-ng-src="{{itemsrc}}" />\n            </div>\n            <div data-ng-if="getItems().moreMenuItems.length > 0" class="cmsx-ctx-more">\n\n                <div class="btn-group yCmsCtxMenu" dropdown is-open="status.isopen" ng-init="itemsrc = moreBtn.iconIdle" ng-mouseout="itemsrc = moreBtn.iconIdle" ng-mouseover="itemsrc = moreBtn.iconNonIdle">\n\n                    <button type="button" class="cmsx-ctx-more-btn pull-right" data-ng-click="toggleDropdown($event)">\n                        <img title="{{moreBtn.i18nKey | translate}}" ng-src="{{status.isopen? moreBtn.iconNonIdle : itemsrc}}" ng-class="{noboxshadow:status.isopen}" />\n                    </button>\n                    <ul class="dropdown-menu" role="menu">\n                        <li role="menu" data-ng-repeat="item in getItems().moreMenuItems">\n                            <a data-ng-click="item.callback(smarteditComponentType, smarteditComponentId, $event)">\n                                <span ng-if="item.displayClass" class="icontext {{item.displayClass}}" />\n                                <img id="{{item.i18nKey | translate}}-{{smarteditComponentId}}-{{smarteditComponentType}}-{{$index}}" title="{{item.i18nKey | translate}}" class="cmsx-ctx-menu-more-icon" data-ng-if="item.smallIcon && !isHybrisIcon(item.smallIcon)" data-ng-src="{{item.smallIcon}}" />\n                                <span class="labeltext">{{item.i18nKey | translate}}</span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="contextualmenuBackground"></div>\n        </div>\n        <div class="yWrapperData">\n            <div data-ng-transclude></div>\n        </div>\n    </div>\n</div>')}]),angular.module("iFrameManagerModule",["functionsModule","translationServiceModule","ngResource","loadConfigModule","restServiceFactoryModule","sharedDataServiceModule","resourceLocationsModule","modalServiceModule"]).factory("deviceSupports",function(){return[{icon:"static-resources/images/icon_res_phone.png",selectedIcon:"static-resources/images/icon_res_phone_s.png",type:"phone",width:480},{icon:"static-resources/images/icon_res_wphone.png",selectedIcon:"static-resources/images/icon_res_wphone_s.png",type:"wide-phone",width:600},{icon:"static-resources/images/icon_res_tablet.png",selectedIcon:"static-resources/images/icon_res_tablet_s.png",type:"tablet",width:700},{icon:"static-resources/images/icon_res_wtablet.png",selectedIcon:"static-resources/images/icon_res_wtablet_s.png",type:"wide-tablet",width:1024},{icon:"static-resources/images/icon_res_desktop.png",selectedIcon:"static-resources/images/icon_res_desktop_s.png",type:"desktop",width:1200},{type:"wide-desktop",icon:"static-resources/images/icon_res_wdesktop.png",selectedIcon:"static-resources/images/icon_res_wdesktop_s.png",width:"100%"}]}).factory("deviceOrientations",["$translate","hitch",function(a,b){var c=[{orientation:"vertical",key:"deviceorientation.vertical.label"},{orientation:"horizontal",key:"deviceorientation.horizontal.label"}];return c.forEach(function(c){a(c.key).then(b(c,function(a){this.label=a}))}),c}]).factory("iFrameManager",["deviceSupports","deviceOrientations","getURI","isBlank","$log","$resource","loadConfigManagerService","restServiceFactory","hitch","sharedDataService","LANDING_PAGE_PATH","PREVIEW_RESOURCE_URI","$location","modalService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p="100%",q="100%",r=[];return{setCurrentLocation:function(a){o=a},_getIframe:function(){return $("iframe")},show:function(){this._closeWait()},hide:function(){this._openWait()},getDeviceSupports:function(){return a},getDeviceOrientations:function(){return b},load:function(a){e.debug("loading storefront ",a),this._getIframe().attr("src",a)},_appendURISuffix:function(a){var b=a.split("?");return b[0].replace(/(.+)([^\/])$/g,"$1$2/previewServlet").replace(/(.+)\/$/g,"$1/previewServlet")+(2==b.length?"?"+b[1]:"")},loadPreview:function(a,b){previewURL=a,/.+\.html/.test(previewURL)||(previewURL=this._appendURISuffix(previewURL)),e.debug("loading storefront iframe with preview ticket:",b);var d=previewURL+(-1==previewURL.indexOf("?")?"?":"&")+"cmsTicketId="+b;o&&c(a)!==c(o)?h.get(d).get().then(i(this,function(a){this.load(o)})):this.load(d)},initializeCatalogPreview:function(){j.get("experience").then(i(this,function(a){return a?void g.loadAsObject().then(i(this,function(b){var c=b.domain+a.siteDescriptor.previewUrl,d=h.get(b.previewTicketURI||l);d.save({catalog:a.catalogDescriptor.catalogId,catalogVersion:a.catalogDescriptor.catalogVersion,language:a.languageDescriptor.isocode,resourcePath:c}).then(i(this,function(a){window.smartEditBootstrapped={},this.loadPreview(a.resourcePath,a.ticketId);var b={previewTicketId:a.ticketId,resourcePath:a.resourcePath};j.set("preview",b)}))})):void m.url(k)}))},apply:function(a,b){var c,e,f=!0;d(b)||(f="vertical"===b.orientation),d(a)||(c=f?a.width:a.height,e=f?a.height:a.width),c||(c=p),e||(e=q),a?this._getIframe().removeClass().addClass("device-"+(f?"vertical":"horizontal")+" device-default"):this._getIframe().removeClass(),this._getIframe().css({width:c,height:e,display:"block",margin:"auto"})},applyDefault:function(){this.apply(this.getDeviceSupports[0],this.getDeviceOrientations()[0]);
},_openWait:function(){return n.open({templateUrl:"web/common/core/services/waitDialog.html",cssClasses:"ySEWaitDialog",controller:["modalManager","hitch","$timeout",function(a,b,c){r.push(a)}]})},_closeWait:function(){r.forEach(function(a){a.close()}),r.length=0}}}]),angular.module("bootstrapServiceModule",["functionsModule","configurationExtractorServiceModule","sharedDataServiceModule","gatewayFactoryModule"]).factory("bootstrapService",["configurationExtractorService","sharedDataService","injectJS","$log","hitch","customTimeout","WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY",function(a,b,c,d,e,f,g){return{_getIframe:function(){return document.getElementsByTagName("iframe")[0].contentWindow},bootstrapSmartEditContainer:function(){angular.bootstrap(document,["smarteditcontainer"])},addDependencyToSmartEditContainer:function(a){d.debug('Adding app: "'+a+'" to smarteditcontainer'),angular.module("smarteditcontainer").requires.push(a)},bootstrapContainerModules:function(f){var h=a.extractSEContainerModules(f);d.debug("outerAppLocations are:",h.appLocations),b.set("authenticationMap",h.authenticationMap),b.set("credentialsMap",f["authentication.credentials"]),angular.module("smarteditcontainer").constant("domain",f.domain).constant("smarteditroot",f.smarteditroot).constant(g,f[g]),c.execute({srcs:h.appLocations,callback:e(this,function(){h.applications.forEach(e(this,function(a){this.addDependencyToSmartEditContainer(a)})),this.bootstrapSmartEditContainer()})})},bootstrapSEApp:function(c){var d=a.extractSEModules(c);b.set("authenticationMap",d.authenticationMap),b.set("credentialsMap",c["authentication.credentials"]);var e={properties:{domain:c.domain,smarteditroot:c.smarteditroot,applications:d.applications},js:[c.smarteditroot+"/static-resources/dist/smartedit/js/presmartedit.js"],css:[c.smarteditroot+"/static-resources/thirdparties/bootstrap/dist/css/bootstrap.min.css",c.smarteditroot+"/static-resources/thirdparties/ui-select/dist/select.min.css",c.smarteditroot+"/static-resources/thirdparties/select2/select2.css",c.smarteditroot+"/static-resources/thirdparties/selectize/dist/css/selectize.default.css",c.smarteditroot+"/static-resources/techne/css/techne.min.css",c.smarteditroot+"/static-resources/dist/smartedit/css/style.css"]};e.properties[g]=c.whiteListedStorefronts,e.js=e.js.concat(d.appLocations),e.js.push(c.smarteditroot+"/static-resources/dist/smartedit/js/postsmartedit.js"),this._getIframe().postMessage({eventName:"smarteditBootstrap",resources:e},"*")}}}]),angular.module("configurationExtractorServiceModule",["functionsModule"]).factory("configurationExtractorService",["convertToArray",function(a){function b(b,e){var f;switch(e){case c:f="smartEditContainerLocation";break;case d:f="smartEditLocation"}var g=a(b).reduce(function(a,c,d,e){if(0===c.key.indexOf("applications")){if(f in c.value){a.applications.push(c.key.split(".")[1]);var g=c.value[f];a.appLocations.push(/^https?\:\/\//.test(g)?g:b.domain+g)}for(var h in c.value.authenticationMap)a.authenticationMap[h]=c.value.authenticationMap[h]}if("authenticationMap"===c.key)for(var i in c.value)a.authenticationMap[i]=c.value[i];return a},{applications:[],appLocations:[],authenticationMap:{}});return e===c?(g.applications.push("administration"),g.appLocations.push([b.smarteditroot,"/static-resources/smarteditcontainer/modules/administrationModule.js"].join(""))):e===d&&(g.applications.push("systemModule"),g.appLocations.push([b.smarteditroot,"/static-resources/smartedit/modules/systemModule.js"].join(""))),g}var c="smartEditContainer",d="smartEdit";return{extractSEContainerModules:function(a){return b(a,c)},extractSEModules:function(a){return b(a,d)}}}]),angular.module("experienceSelectorModule",["eventServiceModule","genericEditorModule","sharedDataServiceModule","loadConfigModule","iframeClickDetectionServiceModule","restServiceFactoryModule","iFrameManagerModule","languageServiceModule","siteServiceModule","catalogServiceModule","genericEditorModule","resourceLocationsModule"]).directive("experienceSelector",["systemEventService","languageService","catalogService","siteService","sharedDataService","loadConfigManagerService","iframeClickDetectionService","restServiceFactory","iFrameManager","GenericEditor","PREVIEW_RESOURCE_URI","copy","hitch","$log","$q","$filter","$document",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return{templateUrl:"web/common/services/genericEditor/genericEditorTemplate.html",restrict:"E",transclude:!0,scope:{experience:"=",dropdownStatus:"=",resetExperienceSelector:"="},link:function(f){function h(a){t.catalog={label:a.catalogDescriptor.name+" - "+a.catalogDescriptor.catalogVersion,siteDescriptor:a.siteDescriptor,catalogDescriptor:a.catalogDescriptor},t.time=a.time,t.language={label:a.languageDescriptor.nativeName,languageDescriptor:a.languageDescriptor}}function l(){r.length=0,d.getSites().then(function(a){a.forEach(function(a){c.getCatalogsForSite(a.uid).then(function(b){b.forEach(function(b){var c={label:b.name+" - "+b.catalogVersion,catalogDescriptor:b,siteDescriptor:a},d=!1;r.forEach(function(a){a.label===c.label&&(d=!0)}),d||r.push(c)}),r=r.sort(function(a,b){return a.label.localeCompare(b.label)})})})})}function n(){s.length=0,e.get("experience").then(function(a){b.getLanguagesForSite(a.siteDescriptor.uid).then(function(a){a.forEach(function(a){s.push({label:a.nativeName,languageDescriptor:a})})})})}function o(){e.get("experience").then(function(a){h(a)})}var r=[],s=[],t={};f.resetExperienceSelector=function(){l(),n(),o(),f.editor.init()},e.get("configuration").then(function(b){f.editor=new j({smarteditComponentType:"DummyPreviewType",smarteditComponentId:null,structureApi:null,structure:[{cmsStructureType:"Dropdown",qualifier:"catalog",i18nKey:"experience.selector.catalog",options:r},{cmsStructureType:"Date",qualifier:"time",i18nKey:"experience.selector.date.and.time"},{cmsStructureType:"Dropdown",qualifier:"language",i18nKey:"experience.selector.language",options:s}],contentApi:b&&b.previewTicketURI||k,updateCallback:null,content:t}),f.editor.alwaysShowReset=!0,f.editor.alwaysShowSubmit=!0,f.editor.onSubmit=function(){return e.get("configuration").then(m(this,function(a){var b={catalog:this.component.catalog.catalogDescriptor.catalogId,catalogVersion:this.component.catalog.catalogDescriptor.catalogVersion,resourcePath:a.domain+this.component.catalog.siteDescriptor.previewUrl,language:this.component.language.languageDescriptor.isocode};return this.component.time&&(b.time=p("date")(new Date(this.component.time),"yyyy-MM-ddTHH:mm:ssZ")),this.editorCRUDService.save(b).then(m(this,function(a){return{payload:this.component,response:a}}))}))},f.editor.updateCallback=function(b,c){f.dropdownStatus.isopen=!1,e.get("configuration").then(function(d){var g={siteDescriptor:b.catalog.siteDescriptor,catalogDescriptor:b.catalog.catalogDescriptor,languageDescriptor:b.language.languageDescriptor,time:p("date")(b.time,f.editor.format)};e.set("experience",g).then(function(){a.sendAsynchEvent("experienceUpdate");var f=d.domain+b.catalog.siteDescriptor.previewUrl;i.loadPreview(f,c.ticketId);var g={previewTicketId:c.ticketId,resourcePath:f};e.set("preview",g)})})}}),f.submitButtonText="componentform.actions.apply",f.cancelButtonText="componentform.actions.cancel",f.modalHeaderTitle="experience.selector.header",f.reset=function(){f.editor.reset(f.componentForm),f.dropdownStatus.isopen=!1},f.submit=function(){return f.editor.submit(f.componentForm)},f.$watch(function(){return f.editor&&f.editor.getComponent()},function(a,c){a&&c&&a.catalog&&c.catalog&&a.catalog.siteDescriptor.uid!==c.catalog.siteDescriptor.uid&&(s.length=0,b.getLanguagesForSite(a.catalog.siteDescriptor.uid).then(function(a){var b=a.map(function(a){return a.isocode});b.indexOf(f.editor.component.language.languageDescriptor.isocode)<0&&(f.editor.component.language={label:a[0].nativeName,languageDescriptor:a[0]}),a.forEach(function(a){s.push({label:a.nativeName,languageDescriptor:a})})}))},!0),q.on("click",function(a){if($(a.target).parents("#option_0").length<=0){if($(a.target).parents(".ui-select-choices-row").length>0)return;f.dropdownStatus&&f.dropdownStatus.isopen&&(f.editor.reset(f.componentForm),f.dropdownStatus.isopen=!1,f.$apply())}}),g.registerCallback("closeExperienceSelector",function(){f.dropdownStatus&&f.dropdownStatus.isopen&&(f.editor.reset(f.componentForm),f.dropdownStatus.isopen=!1)})}}}]),angular.module("experienceSelectorButtonModule",["eventServiceModule","sharedDataServiceModule","sharedDataServiceModule"]).directive("experienceSelectorButton",["systemEventService","sharedDataService","$interval",function(a,b,c){return{templateUrl:"web/smarteditcontainer/core/services/experienceSelectorWidget/experienceSelectorWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(c,d,e){a.registerEventHandler("experienceUpdate",function(){return b.get("experience").then(function(a){c.experience=a})}),c.buildExperienceText=function(){return c.experience?c.experience.catalogDescriptor.name+" - "+c.experience.catalogDescriptor.catalogVersion+"  |  "+c.experience.languageDescriptor.nativeName+(c.experience.time?"  |  "+c.experience.time:""):""}}}}]),angular.module("inflectionPointSelectorModule",["sharedDataServiceModule","sharedDataServiceModule","iFrameManagerModule","resourceLocationsModule","iframeClickDetectionServiceModule"]).directive("inflectionPointSelector",["sharedDataService","iFrameManager","iframeClickDetectionService","$document","STORE_FRONT_CONTEXT",function(a,b,c,d,e){return{templateUrl:"web/smarteditcontainer/core/services/inflectionPointSelectorWidget/inflectionPointSelectorWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(a,f,g,h,i){a.isLanding=function(){var a=i().context.ownerDocument.URL.indexOf(e);return a>0?!1:!0},a.selectPoint=function(c){a.currentPointSelected=c,a.status.isopen=!a.status.isopen,void 0!==c&&b.apply(c,a.deviceOrientation)};var j=[];j=b.getDeviceSupports(),a.currentPointSelected=j[5],a.points=j,a.status={isopen:!1},a.toggleDropdown=function(b){b.preventDefault(),b.stopPropagation(),a.status.isopen=!a.status.isopen},c.registerCallback("inflectionPointClose",function(){a.status.isopen=!1}),d.on("click",function(b){$(b.target).parents("inflection-point-selector").length<=0&&a.status.isopen&&(a.status.isopen=!1,a.$apply())})}}}]),angular.module("clonePageModule",["alertServiceModule"]).directive("clonePage",["$log","alertService",function(a,b){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/clonePage/clonePageTemplate.html",restrict:"E",transclude:!0,scope:{selectedItemCallbacks:"="},link:function(b,c,d){b.selectedItemCallbacks.onClose=function(){a.debug("Clone Page close callback triggered")}}}}]),angular.module("pageInformationModule",["alertServiceModule"]).directive("pageInformation",["$log","alertService",function(a,b){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/pageInformation/pageInformationTemplate.html",restrict:"E",transclude:!0,scope:{selectedItemCallbacks:"="},link:function(b,c,d){b.selectedItemCallbacks.onClose=function(){a.debug("Page Information close callback triggered")}}}}]),angular.module("pageToolMenuModule",["toolbarModule","iframeClickDetectionServiceModule","pageInformationModule","clonePageModule","syncStatusModule"]).directive("pageToolMenu",["toolbarServiceFactory","iframeClickDetectionService","hitch","$document",function(a,b,c,d){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/pageToolMenuTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{toolbarName:"@",imageRoot:"=imageRoot"},link:function(c,e,f){function g(a){return $(a.target).hasClass("pageToolMenu")||$(a.target).parents(".pageToolMenu").length>0}function h(a){return $(a.target).hasClass("yHybridAction")||$(a.target).parents(".btn.btn-default.yHybridAction").length>0}var i=a.getToolbarService(c.toolbarName);i.setOnAliasesChange(function(a){c.actions=a,c.actionsClasses=i.actionsClasses}),c.backButtonI18nKey="page.tool.menu.back.button",c.imageRoot=c.imageRoot||"",c.actions=i.getAliases(),c.actionsClasses=i.actionsClasses,c.triggerAction=function(a,b){b.preventDefault(),a.include&&(c.showPageToolMenuSelectedItem(),c.selected={include:a.include}),i.triggerAction(a)},c.selected={},c.selectedItemCallbacks={onClose:function(){}},c.clearSelectedItem=function(){c.selectedItemCallbacks.onClose(),c.selected={},c.selectedItemCallbacks={onClose:function(){}}},c.showPageToolMenuHome=function(a){a&&a.preventDefault(),$("#page-tool-menu-home").removeClass("hideLevel1").addClass("showLevel1"),$("#page-tool-menu-selected-item").removeClass("showLevel2").addClass("hideLevel2"),c.clearSelectedItem()},c.showPageToolMenuSelectedItem=function(a){a&&a.preventDefault(),$("#page-tool-menu-home").addClass("hideLevel1").removeClass("showLevel1"),$("#page-tool-menu-selected-item").removeClass("hideLevel2").addClass("showLevel2")},c.closePageToolMenu=function(a){a&&a.preventDefault();var b=$("body");b.removeClass("nav-expanded-right"),b.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$("#page-tool-menu-home").removeClass("hideLevel1").addClass("showLevel1"),$("#page-tool-menu-selected-item").addClass("hideLevel2").removeClass("showLevel2")}),c.clearSelectedItem()},d.on("click",function(a){g(a)||h(a)||c.closePageToolMenu()}),b.registerCallback("pageToolMenuClose",function(){c.closePageToolMenu()})}}}]),angular.module("syncStatusModule",[]).directive("syncStatus",function(){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/syncStatus/syncStatusTemplate.html",restrict:"E",transclude:!1,link:function(a,b,c){a.syncDate=Date.now(),a.syncStatus="sync.status.synced.published"}}}),angular.module("leftToolbarModule",["authenticationModule","iframeClickDetectionServiceModule","resourceLocationsModule"]).directive("leftToolbar",["$location","$timeout","authenticationService","iframeClickDetectionService","LANDING_PAGE_PATH",function(a,b,c,d,e){return{templateUrl:"web/smarteditcontainer/core/services/topToolbars/leftToolbarTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{imageRoot:"=imageRoot"},link:function(f,g,h){f.showToolbar=function(a){a.preventDefault(),$("body").toggleClass("nav-expanded-left")},f.showSites=function(){f.closeLeftToolbar(),b(function(){a.url(e)},400)},f.showCfgCenter=function(a){a.preventDefault(),$("#hamburger-menu-level1").addClass("ySELeftHideLevel1").removeClass("ySELeftShowLevel1"),$("#hamburger-menu-level2").removeClass("ySELeftHideLevel2").addClass("ySELeftShowLevel2")},f.goBack=function(){$("#hamburger-menu-level1").removeClass("ySELeftHideLevel1").addClass("ySELeftShowLevel1"),$("#hamburger-menu-level2").removeClass("ySELeftShowLevel2").addClass("ySELeftHideLevel2")},f.signOut=function(a){c.logout()},$(document).bind("click",function(a){$(a.target).parents(".leftNav").length>0||$(a.target).parents(".navbar-header.pull-left.leftNavBtn").length>0||f.closeLeftToolbar()}),f.closeLeftToolbar=function(a){a&&a.preventDefault(),$("body").removeClass("nav-expanded-left"),f.goBack()},d.registerCallback("leftToolbarClose",function(){f.closeLeftToolbar()})}}}]),window.smartEditBootstrapped={},angular.module("smarteditcontainer",["ngRoute","ngResource","ui.bootstrap","coretemplates","loadConfigModule","iFrameManagerModule","alertsBoxModule","httpAuthInterceptorModule","httpSecurityHeadersInterceptorModule","httpErrorInterceptorModule","experienceInterceptorModule","languageInterceptorModule","bootstrapServiceModule","toolbarModule","leftToolbarModule","pageToolMenuModule","modalServiceModule","dragAndDropServiceModule","previewTicketInterceptorModule","previewDataGenericEditorResponseHandlerModule","catalogServiceModule","catalogDetailsModule","experienceSelectorButtonModule","experienceSelectorModule","sharedDataServiceModule","inflectionPointSelectorModule","paginationFilterModule","resourceLocationsModule","fetchMediaDataHandlerModule","experienceServiceModule","eventServiceModule","dragAndDropScrollingModule","urlServiceModule"]).config(["LANDING_PAGE_PATH","STOREFRONT_PATH","$routeProvider","$logProvider",function(a,b,c,d){c.when(a,{templateUrl:"web/smarteditcontainer/fragments/landingPage.html",controller:"landingPageController",controllerAs:"landingCtl"}).when(b,{templateUrl:"web/smarteditcontainer/fragments/mainview.html",controller:"defaultController"}).otherwise({redirectTo:a}),d.debugEnabled(!1)}]).run(["$rootScope","$log","$q","toolbarServiceFactory","gatewayFactory","loadConfigManagerService","bootstrapService","iFrameManager","dragAndDropService","restServiceFactory","sharedDataService","iFrameManager","urlService","dragAndDropScrollingService",function(a,b,c,d,e,f,g,h,i,j,k,h,l,m){function n(){$("#js_iFrameWrapper").css("padding-top",$(".ySmartEditToolbars").height()+"px")}e.initListener(),f.loadAsObject().then(function(a){k.set("defaultToolingLanguage",a.defaultToolingLanguage)});var o=d.getToolbarService("smartEditTitleToolbar");o.addItemsStyling("nav nav-pills group pull-right"),o.addItems([{type:"TEMPLATE",include:"web/smarteditcontainer/core/services/topToolbars/leftToolbarWrapperTemplate.html"},{type:"TEMPLATE",include:"web/smarteditcontainer/core/services/topToolbars/logoTemplate.html"},{type:"HYBRID_ACTION",include:"web/smarteditcontainer/core/services/topToolbars/deviceSupportTemplate.html"}]);var p=d.getToolbarService("experienceSelectorToolbar");p.addItemsStyling("col-md-5 col-lg-4 col-lg-offset-1 yPage"),p.addItems([{type:"TEMPLATE",include:"web/smarteditcontainer/core/services/topToolbars/experienceSelectorWrapperTemplate.html"}]);var q=e.createGateway("smartEditBootstrap");q.subscribe("reloadFormerPreviewContext",function(a,b){n();var d=c.defer();return h.initializeCatalogPreview(),d.resolve(),d.promise}),q.subscribe("loading",function(a,b){var d=c.defer();return h.setCurrentLocation(b.location),h.hide(),delete window.smartEditBootstrapped[b.location],d.promise}),q.subscribe("bootstrapSmartEdit",function(a,b){n();var d=c.defer();return window.smartEditBootstrapped[b.location]?d.resolve():(window.smartEditBootstrapped[b.location]=!0,f.loadAsObject().then(function(a){g.bootstrapSEApp(a),d.resolve()})),d.promise}),q.subscribe("smartEditReady",function(a,b){var d=c.defer();return d.resolve(),m.initialize(),i.apply(),h.show(),d.promise})}]).controller("landingPageController",["loadConfigManagerService","catalogService","restServiceFactory",function(a,b,c){var d=this;d.CATALOGS_PER_PAGE=4,a.loadAsObject().then(function(a){return c.setDomain(a.domain),b.getAllCatalogsGroupedById()}).then(function(a){d.catalogs=a,d.totalItems=a.length,d.currentPage=1});var e=angular.element(document.querySelector("body"));e.hasClass("is-storefront")&&e.removeClass("is-storefront")}]).controller("defaultController",["$log","$routeParams","$location","LANDING_PAGE_PATH","systemEventService","iFrameManager","experienceService","sharedDataService",function(a,b,c,d,e,f,g,h){g.buildDefaultExperience(b).then(function(a){h.set("experience",a).then(function(a){e.sendAsynchEvent("experienceUpdate"),f.applyDefault(),f.initializeCatalogPreview(a)})},function(b){a.error("the provided path could not be parsed: "+c.url()),a.error(b),c.url(d)});var i=angular.element(document.querySelector("body"));i.addClass("is-storefront")}]),angular.module("toolbarModule",["gatewayProxyModule","toolbarInterfaceModule","translationServiceModule"]).factory("toolbarServiceFactory",["$q","$log","gatewayProxy","hitch","extend","ToolbarServiceInterface",function(a,b,c,d,e,f){var g=function(a){this.actions={},this.aliases=[],this.onAliasesChange=null,this.gatewayId=a,c.initForService(this,["addAliases","triggerActionOnInner"])};g=e(f,g),g.prototype.addAliases=function(a){this.aliases=this.aliases.concat(a),this.onAliasesChange&&this.onAliasesChange(this.aliases)},g.prototype.setOnAliasesChange=function(a){this.onAliasesChange=a},g.prototype.triggerAction=function(a){return a&&this.actions[a.key]?void d(a,this.actions[a.key])():void this.triggerActionOnInner(a)},g.prototype.addItemsStyling=function(a){this.actionsClasses=a};var h={},i=function(a){return h[a]||(h[a]=new g(a)),h[a]};return{getToolbarService:i}}]).directive("toolbar",["toolbarServiceFactory",function(a){return{templateUrl:"web/smarteditcontainer/core/toolbar/toolbarTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{cssClass:"@",toolbarName:"@",imageRoot:"=imageRoot"},link:function(b,c,d){b.imageRoot||(b.imageRoot=""),b.btnStates||(b.btnStates={lang:!1,add:!1,edit:!1,pageInfo:!1});var e=a.getToolbarService(b.toolbarName);e.setOnAliasesChange(function(a){b.actions=a,b.actionsClasses=e.actionsClasses}),b.actions=e.getAliases(),b.actionsClasses=e.actionsClasses,b.triggerAction=function(a,b){b.preventDefault(),e.triggerAction(a)}}}}]),angular.module("alertServiceModule",["gatewayProxyModule","functionsModule"]).factory("alertService",["gatewayProxy","$rootScope","hitch",function(a,b,c){var d=function(b){this.gatewayId=b,a.initForService(this),this.field="alerts"};return d.prototype.pushAlerts=function(a){b.$$phase?b[this.field]=a:b.$apply(c(this,function(){b[this.field]=a})),setTimeout(c(this,function(){delete b[this.field],b.$digest()}),3e3)},new d("alertService")}]),angular.module("catalogServiceModule",["restServiceFactoryModule","siteServiceModule","resourceLocationsModule"]).factory("catalogService",["restServiceFactory","siteService","CATALOG_VERSION_DETAILS_RESOURCE_URI","$q",function(a,b,c,d){function e(a){var b=Object.keys(a.name.value)[0];return a.name=a.name.value[b],a.catalogVersionDetails=a.catalogVersionDetails.filter(function(a){return a.name&&a.name.type&&a.name.value}).map(function(a){var b=Object.keys(a.name.value)[0];return a.name=a.name.value[b],a}),a}var f={},g=a.get(c);return{getCatalogsForSite:function(a){return f[a]?d.when(f[a]):g.get({siteUID:a}).then(function(b){return f[a]=e(b).catalogVersionDetails.reduce(function(a,b){return b.name&&b.catalogId&&b.version&&a.push({name:b.name,catalogId:b.catalogId,catalogVersion:b.version,thumbnailUrl:b.thumbnailUrl}),a},[]).sort(function(a,b){return a.name.localeCompare(b.name)}),f[a]})},getAllCatalogsGroupedById:function(){var a=[],c=d.defer(),e=this;return b.getSites().then(function(b){var f=[];b.forEach(function(a,b){f.push(e.getCatalogsForSite(a.uid).then(function(b){return b.map(function(b){return b.siteDescriptor=a,b})}))}),d.all(f).then(function(b){b=b.reduce(function(a,b){return a=a.concat(b)},[]),b.forEach(function(b){var c=null;a.forEach(function(a){a.catalogId==b.catalogId&&(c=a)}),c||(c={name:b.name,catalogId:b.catalogId,catalogVersions:[]},a.push(c)),c.catalogVersions.push(b)}),c.resolve(a)},function(){c.reject()})},function(){c.reject()}),c.promise}}}]),angular.module("confirmationModalServiceModule",["modalServiceModule"]).factory("confirmationModalService",["modalService","MODAL_BUTTON_STYLES","MODAL_BUTTON_ACTIONS",function(a,b,c){function d(d){if(!d.description)throw new Error("confirmation.modal.missing.description");return a.open({size:"md",title:d.title||"confirmation.modal.title",templateInline:'<div id="confirmationModalDescription">{{ "'+d.description+'" | translate }}</div>',buttons:[{id:"confirmCancel",label:"confirmation.modal.cancel",style:b.SECONDARY,action:c.DISMISS},{id:"confirmOk",label:"confirmation.modal.ok",action:c.CLOSE}]})}return{confirm:d}}]),function(){angular.module("dragAndDropScrollingModule",[]).factory("dragAndDropScrollingService",["$filter","hitch",function(a,b){function c(a){return $(a)}function d(){g=this._getSelector("iframe"),h=g.contents().find("body"),f=g.contents().find(e.targetSelector)}var e,f,g,h,i=$.ui.smartedit,j={},k={UP:1,DOWN:2},l={VISIBLE:"visible",FF_FIX_APPLIED:"firefox-fix-applied",UI_HINT:"UIhintDragAndDrop"},m=i._getBrowser()===i._BROWSERS.IE?60:5,n=i._getBrowser()===i._BROWSERS.IE?100:10,o=10,p=450,q=20,r=65,s=!1,t=!1,u=a("translate"),v=function(){var a=this._getSelector("body");j.TOP=this._createAndAppendUIHint(a,"draganddrop.uihint.top","top"),j.BOTTOM=this._createAndAppendUIHint(a,"draganddrop.uihint.bottom","bottom"),i&&i._getBrowser()===i._BROWSERS.FIREFOX&&(j.IFRAME_TOP=this._createAndAppendUIHint(h,null,"top-firefox-fix"),j.IFRAME_BOTTOM=this._createAndAppendUIHint(h,"draganddrop.uihint.bottom","bottom-firefox-fix"))},w=function(a,b,c){var d=this._getSelector("<div class='UIhintDragAndDrop' style='display: none;'></div>");return b&&d.append("<span>"+u(b)+"</span>"),c&&d.addClass(c),a.append(d),d},x=function(){return $("."+l.UI_HINT).length>0},y=function(){var a=!1,c={},d=!1,e=!1;return{setMousePosition:function(a,b){c={x:a,y:b}},getMousePosition:function(){return c},checkScrollingStatus:function(b,c){if(c===k.UP){var d=i._getIframeScrollTop()<o;a=b&&!d}else if(c===k.DOWN){var e=h.height()-i._getIframeScrollTop()<p;a=b&&!e}return a},scrollIFrame:function(d){var e;if(d===k.UP)e="-="+m;else{if(d!==k.DOWN)return;e="+="+m}var f=g.contents().find("html, body");if(!f.is(":animated")){var h=g.contents().find("._sm_helper");h.length>0&&(t?($.ui.smartedit._getBrowser()!==$.ui.smartedit._BROWSERS.FIREFOX&&(h.detach().appendTo("body .ySmartEditToolbars"),$("._sm_helper").detach().appendTo("body .ySmartEditToolbars")),h[0].style.top=c.y-i._getIframeScrollTop()+"px"):h[0].style.top=c.y+i._getIframeScrollTop()+"px"),f.animate({scrollTop:e},n,null,b(this,function(){this.checkScrollingStatus(a,d)&&this.scrollIFrame(d)}))}},calculateIFrameHintMouseStatus:function(a,b){q>b?(j.TOP.trigger("mouseenter"),d=!0):b>q&&d&&(j.TOP.trigger("mouseleave"),d=!1),b+r>g.height()?(j.BOTTOM.trigger("mouseenter"),e=!0):b+r<g.height()&&e&&(j.BOTTOM.trigger("mouseleave"),e=!1)}}}(),z=function(){j.TOP.bind("mouseenter",function(){y.checkScrollingStatus(!0,k.UP)&&y.scrollIFrame(k.UP)}),j.TOP.bind("mouseleave",function(){y.checkScrollingStatus(!1,k.UP),f.sortable("refreshPositions")}),j.BOTTOM.bind("mouseenter",function(){y.checkScrollingStatus(!0,k.DOWN)&&y.scrollIFrame(k.DOWN)}),j.BOTTOM.bind("mouseleave",function(){y.checkScrollingStatus(!1,k.DOWN),f.sortable("refreshPositions")}),h.bind("mousemove",function(a){a.preventDefault&&a.preventDefault(),y.setMousePosition(a.clientX,a.clientY),i._getBrowser()===i._BROWSERS.FIREFOX&&s&&!t&&y.calculateIFrameHintMouseStatus(a.clientX,a.clientY)})},A=function(a){this._refreshElementReferences(),j.TOP.toggleClass(l.VISIBLE,!0),j.BOTTOM.toggleClass(l.VISIBLE,!0),a||i._getBrowser()!==i._BROWSERS.FIREFOX||(j.BOTTOM.toggleClass(l.FF_FIX_APPLIED,!0),j.IFRAME_TOP.toggleClass(l.VISIBLE,!0),j.IFRAME_BOTTOM.toggleClass(l.VISIBLE,!0)),s=!0},B=function(a){j.TOP.removeClass(l.VISIBLE),j.BOTTOM.removeClass(l.VISIBLE),a||i._getBrowser()!==i._BROWSERS.FIREFOX||(j.BOTTOM.removeClass(l.FF_FIX_APPLIED),j.IFRAME_TOP.removeClass(l.VISIBLE),j.IFRAME_BOTTOM.removeClass(l.VISIBLE)),s=!1};return{initialize:function(){e&&(this._refreshElementReferences(),this._areUIHintsInjected()||(this._addUIHints(),this._registerScrollingInPage()))},enableScrolling:function(a,b){e&&(t=a,(a&&b||!a)&&this._showUIHints(b))},disableScrolling:function(a,b){e&&((a&&b||!a)&&this._hideUIHints(b),t=!1)},connectWithDragAndDrop:function(a){e=a},_addUIHints:v,_areUIHintsInjected:x,_showUIHints:A,_hideUIHints:B,_getSelector:c,_createAndAppendUIHint:w,_refreshElementReferences:d,_registerScrollingInPage:z}}])}(),angular.module("dragAndDropServiceModule",["dragAndDropServiceInterfaceModule","gatewayProxyModule","dragAndDropScrollingModule"]).factory("dragAndDropService",["$log","$rootScope","$timeout","DragAndDropServiceInterface","gatewayProxy","extend","hitch","dragAndDropScrollingService",function(a,b,c,d,e,f,g,h){var i=$.ui.smartedit,j="_sm_helper",k=function(d){this.gatewayId=d,e.initForService(this,["register"]),this.configurations=[],this._sharedDragHelper=null,this._originalDraggedItem=null,this._isDragStartedInDraggable=!1,this._isHelperRepositioned=!1,this._isSlotsPositionCachingUpdated=!1,this.getSelector=function(a){return $(a)},this.getSelectorInIframe=function(a){return this.getSelector("iframe").contents().find(a)},this.cancel=function(a,b,c,d){this.fromFrame?d.sender?d.sender.sortable("cancel"):b.sortable("cancel"):$(c.target).find(a+":nth-child("+(d.item.index()+1)+")").remove()},this.cloneElement=function(a){return $(a).clone()},this._getReference=function(a){return a},this._removeDynamicStyles=function(a){this._removeHelpers(),this.getSelectorInIframe(a.targetSelector).removeClass("eligible-slot")},this._removeHelpers=function(){var a="."+j;this.getSelectorInIframe(a).remove(),this.getSelector(a).remove()},b.$watch(g(this,function(){return this.configurations.some(function(a){var b=$(a.sourceSelector);return b.filter($(":not(.ui-draggable.ui-draggable-handle)")).length})}),g(this,function(){c(g(this,function(){a.debug("Updating draggable components."),this.apply()},0,!1))}))};return k=f(d,k),k.prototype.draggableStart=function(a,b,c,d){this.getSelectorInIframe("body").addClass("is-dragging"),this._isDragStartedInDraggable=!0,this._isHelperRepositioned=!1,this.updateSlotsPositionCaching(a),$("._sm_helper").detach().appendTo("body .ySmartEditToolbars"),h.enableScrolling(!0,!0),a.startCallback&&a.startCallback(c,d)},k.prototype.draggableDrag=function(a,b,c,d){if(this.fromFrame=!1,this._sharedDragHelper=d.helper[0],!this._isHelperRepositioned){this._isHelperRepositioned=!0;var e=d.helper;e.detach().appendTo("body .ySmartEditToolbars"),d.helper[0].style.top=c.clientX,d.helper[0].style.left=c.clientY}},k.prototype.draggableStop=function(a,b,c,d){this.getSelectorInIframe("body").removeClass("is-dragging is-sorting"),this._removeDynamicStyles(a),this._isDragStartedInDraggable=!1,a.stopCallback&&a.stopCallback(c,d),this._sharedDragHelper=null,this._isHelperRepositioned=!1},k.prototype.sortableStart=function(a,b,c,d){this.getSelectorInIframe("body").addClass("is-sorting"),this.updateSlotsPositionCaching(a),this._isDragStartedInDraggable||h.enableScrolling(this._isDragStartedInDraggable,!1),this.fromFrame=!0,this.getSelectorInIframe(a.targetSelector).addClass("eligible-slot"),this._isDragStartedInDraggable&&d.item.replaceWith(this._sharedDragHelper);var e=this.getSelector(b);e.sortable("refresh"),a.startCallback&&a.startCallback(c,d)},k.prototype.sortableStop=function(a,b,c,d){this.getSelectorInIframe("body").removeClass("is-sorting"),this._removeDynamicStyles(a),this._isHelperRepositioned=!1,a.stopCallback&&a.stopCallback(c,d)},k.prototype.sortableOver=function(a,b,c,d){a.overCallback&&a.overCallback(c,d)},k.prototype.sortableOut=function(a,b,c,d){a.outCallback&&a.outCallback(c,d)},k.prototype.sortableUpdate=function(a,b,c,d){var e=d.item.closest(a.targetSelector),f=c.target;if(f===e[0]){var h=d.item;this._isDragStartedInDraggable&&(this._isDragStartedInDraggable=!1,h=this._originalDraggedItem,d.item.replaceWith(h),d.item=h),a.dropCallback&&a.dropCallback(c,d,g(this,this.cancel,a.sourceSelector,e,c,d))}},k.prototype.draggableHelper=function(a,b,c,d){var e=null;if(this._originalDraggedItem=this.cloneElement(b).removeAttr("id"),this._originalDraggedItem.removeClass("ui-draggable ui-draggable-handle"),this._originalDraggedItem.addClass("ui-sortable-handle"),a.helper){var f=this.getSelector(a.helper(c,b));this._copyElementProperties(this._originalDraggedItem,f),e=f.prop("outerHTML")}else e=this._originalDraggedItem.html();var g=$("<div>"+e+"</div>");return g.attr("id",j),g.addClass(j),g},k.prototype.sortableHelper=function(a,b,c,d){var e=d.html();if(a.helper){var f=this.getSelector(a.helper(c,d));this._copyElementProperties(d,f),e=f.prop("outerHTML")}var g=$("<div>"+e+"</div>");return g.attr("id",j),g.addClass(j),g},k.prototype._copyElementProperties=function(a,b){for(var c=a[0].attributes,d=0;d<c.length;d++){var e=c[d];"class"!==e.nodeName&&"id"!==e.nodeName&&b.attr(e.nodeName,e.nodeValue)}},k.prototype.registerSortable=function(a){var b=this,c=$("#js_iFrameWrapper iframe"),d=450;c.contents().find("body").css("padding-bottom",d/2.5),this.getSelectorInIframe(a.targetSelector).sortable({connectWith:a.targetSelector,items:a.sourceSelector,iframeFix:!0,
cursorAt:{top:0,left:0},scroll:!1,intersect:"pointer",placeholder:"ySEDnDPlaceHolder",start:function(c,d){b.sortableStart(a,b._getReference(this),c,d)},stop:function(c,d){b._isDragStartedInDraggable||h.disableScrolling(b._isDragStartedInDraggable,!1),b.sortableStop(a,b._getReference(this),c,d)},over:function(c,d){b.sortableOver(a,b._getReference(this),c,d)},out:function(c,d){$.ui.smartedit._getBrowser()!==$.ui.smartedit._BROWSERS.FIREFOX&&(b._isDragStartedInDraggable?($("._sm_helper").detach().appendTo("body .ySmartEditToolbars"),$("iframe").contents().find("._sm_helper").detach().appendTo("body .ySmartEditToolbars")):$("._sm_helper").detach().appendTo("body .ySmartEditToolbars")),b.sortableOut(a,b._getReference(this),c,d)},update:function(c,d){b.sortableUpdate(a,b._getReference(this),c,d)},helper:function(c,d){return b.sortableHelper(a,b._getReference(this),c,d)},sort:function(a,b){}}),this.getSelectorInIframe(a.targetSelector).disableSelection()},k.prototype.registerDrag=function(a){var b=this;this.getSelector(a.sourceSelector).draggable({revert:!1,iframeFix:!0,scroll:!1,cursorAt:{left:0,top:0},connectToSortable:this.getSelectorInIframe(a.targetSelector),helper:function(c){return b.draggableHelper(a,b._getReference(this),c,null)},start:function(c,d){b.draggableStart(a,b._getReference(this),c,d)},drag:function(c,d){b.draggableDrag(a,b._getReference(this),c,d)},stop:function(c,d){h.disableScrolling(!0,!0),b.draggableStop(a,b._getReference(this),c,d)}})},k.prototype.register=function(a){this.configurations.push(a)},k.prototype.updateSlotsPositionCaching=function(a){var b=this.getSelectorInIframe(a.targetSelector);b.sortable("refreshPositions")},k.prototype.apply=function(){i._clearCache(),this.configurations.forEach(g(this,function(b){a.debug("applying dragAndDrop with configuration",b),this.registerSortable(b),this.registerDrag(b),h.connectWithDragAndDrop(b)}))},new k("dragAndDrop")}]),angular.module("experienceServiceModule",["siteServiceModule","catalogServiceModule","languageServiceModule"]).factory("experienceService",["$q","siteService","catalogService","languageService",function(a,b,c,d){return{buildDefaultExperience:function(e){var f=e.siteId,g=e.catalogId,h=e.catalogVersion;return b.getSiteById(f).then(function(b){return c.getCatalogsForSite(f).then(function(c){var e=c.filter(function(a){return a.catalogId==g&&a.catalogVersion==h});return 1!==e.length?a.reject("no catalogVersionDescriptor found for _catalogId_ catalogId and _catalogVersion_ catalogVersion".replace("_catalogId_",g).replace("_catalogVersion_",h)):d.getLanguagesForSite(f).then(function(a){var c={siteDescriptor:b,catalogDescriptor:e[0],languageDescriptor:a[0],time:null};return c})})})}}}]),angular.module("iframeClickDetectionServiceModule",["gatewayProxyModule"]).factory("iframeClickDetectionService",["gatewayProxy",function(a){function b(){this.gatewayId="iframeClick",this.callbacks={},a.initForService(this,["onIframeClick"])}return b.prototype.registerCallback=function(a,b){this.callbacks[a]=b},b.prototype.removeCallback=function(a){this.callbacks[a]&&delete this.callbacks[a]},b.prototype.onIframeClick=function(){for(var a in this.callbacks)this.callbacks[a]()},new b}]),function(){angular.module("renderServiceModule",["gatewayProxyModule","renderServiceInterfaceModule"]).factory("renderService",["extend","gatewayProxy","RenderServiceInterface",function(a,b,c){var d="Renderer",e=function(a){this.gatewayId=a,b.initForService(this,["renderComponent","renderRemovalBySlotAndComponent","renderRemoval"])};return new(e=a(c,e))(d)}])}(),angular.module("sharedDataServiceModule",["gatewayProxyModule","sharedDataServiceInterfaceModule"]).factory("sharedDataService",["gatewayProxy","SharedDataServiceInterface","extend",function(a,b,c){var d={},e=function(b){this.gatewayId=b,a.initForService(this)};return e=c(b,e),e.prototype.get=function(a){return d[a]},e.prototype.set=function(a,b){d[a]=b},new e("sharedData")}]),angular.module("siteServiceModule",["restServiceFactoryModule","resourceLocationsModule"]).factory("siteService",["restServiceFactory","SITES_RESOURCE_URI","$q",function(a,b,c){function d(a){return a.sites=a.sites.map(function(a){var b=Object.keys(a.name.value)[0];return a.name=a.name.value[b],a}),a}var e=null,f=a.get(b);return{getSites:function(){return e?c.when(e):f.get().then(function(a){return e=d(a).sites.sort(function(a,b){return a.name.localeCompare(b.name)})})},getSiteById:function(a){return this.getSites().then(function(b){return b.filter(function(b){return b.uid==a})[0]})}}}]),angular.module("storageServiceModule",["gatewayProxyModule","ngCookies"]).factory("storageService",["$rootScope","$cookies","$window","gatewayProxy",function(a,b,c,d){var e="smartedit-sessions",f=function(a){this.gatewayId=a,d.initForService(this,["isInitialized","storeAuthToken","getAuthToken","removeAuthToken","removeAllAuthTokens"])};return f.prototype.isInitialized=function(){return void 0!==b.getObject(e)},f.prototype.storeAuthToken=function(a,b){var c=this._getFromCookie();c[a]=b,this._setToCookie(c)},f.prototype.getAuthToken=function(a){var b=this._getFromCookie();return b[a]},f.prototype.removeAuthToken=function(a){var b=this._getFromCookie();delete b[a],this._setToCookie(b)},f.prototype.removeAllAuthTokens=function(){b.remove(e)},f.prototype._getFromCookie=function(){var a=b.getObject(e);return a?JSON.parse(atob(a)):{}},f.prototype._setToCookie=function(a){if(Object.keys(a).length>0){var d={secure:!0};c.location.protocol.indexOf("https")>=0?b.putObject(e,btoa(JSON.stringify(a)),d):b.putObject(e,btoa(JSON.stringify(a)))}else b.remove(e)},new f("storage")}]),angular.module("urlServiceModule",["gatewayProxyModule","urlServiceInterfaceModule"]).factory("urlService",["gatewayProxy","UrlServiceInterface","extend",function(a,b,c){var d=function(b){this.gatewayId=b,a.initForService(this)};return d=c(b,d),d.prototype.openUrlInPopup=function(a){var b=window.open(a,"_blank","toolbar=no, scrollbars=yes, resizable=yes");b.focus()},new d("urlService")}]),function(){angular.module("catalogDetailsModule",["resourceLocationsModule"]).factory("catalogDetailsService",function(){var a=[],b=function(b){a=a.concat(b)},c=function(){return a};return{addItems:b,getItems:c}}).directive("catalogDetails",["$location","STOREFRONT_PATH","catalogDetailsService",function(a,b,c){return{templateUrl:"web/smarteditcontainer/services/widgets/catalogDetails/catalogDetailsTemplate.html",restrict:"E",transclude:!1,scope:{catalog:"="},link:function(d){d.onCatalogSelect=function(c){var d=b.replace(":siteId",c.siteDescriptor.uid).replace(":catalogId",c.catalogId).replace(":catalogVersion",c.catalogVersion);a.path(d)},d.templates=c.getItems()}}}])}(),angular.module("paginationFilterModule",[]).filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}});